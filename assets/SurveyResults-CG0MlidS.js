import{Q as Dt}from"./QSeparator-BvYjkyh3.js";import{gz as He,gu as g,gB as c,gC as nt,gA as je,hz as Fl,gM as jt,h8 as Al,gk as H,gq as ve,gr as Ee,hO as El,i2 as Nt,hP as bl,hQ as Sl,h7 as vt,h9 as Zt,gZ as $t,hc as hl,hM as Ml,i3 as Bl,hZ as Il,gO as We,i4 as st,hh as Dl,gY as Tt,i5 as zl,i6 as Ll,gV as at,hy as Hl,i7 as jl,i8 as Jt,i9 as zt,ia as el,hT as Nl,ib as $l,gX as ct,gU as ke,gP as Ql,g$ as Ft,h0 as R,hd as tl,he as Kl,hC as Ul,hg as Wl,h5 as Xl,h4 as Yl,gT as Ce,gR as x,gS as P,h3 as Te,h2 as ae,gQ as Fe,hV as At,hW as Et,h1 as ll}from"./index-CyCqcZIQ.js";import{u as yl,g as Qt,e as wl,c as _l,r as Gl,C as Zl,D as al,E as Jl,s as ea,F as ta,G as la,t as aa,H as oa,I as na,J as ia,v as ua,K as ra,L as ol,M as sa,N as ca,O as nl,P as il,R as da,S as fa,T as va,U as ma,j as ga,a as ba,d as Sa,f as ul,i as ha,V as rl,Q as Lt,l as Ae,m as ye,o as sl,n as ya}from"./QDialog-B8pEesiq.js";import{d as wa,f as _a,g as Ca,e as xa,Q as _t}from"./use-checkbox-v9zadS43.js";import{u as Kt,a as Ut}from"./_plugin-vue_export-helper-BIy862K0.js";import{s as Cl,g as xl,Q as Xe}from"./QChip-5D8RM28h.js";import{Q as Mt,s as cl,S as ka,R as qa,E as Pa}from"./survey-BsPVZuTD.js";import{Q as Va}from"./QPage-ByY5YaQR.js";import{P as pa}from"./PollResultBar-CZnSW1dy.js";const Le=He({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:o}){const n=je(),d=g(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return c("td",{class:d.value},nt(o.default));const s=n.vnode.key,u=(e.props.colsMap!==void 0?e.props.colsMap[s]:null)||e.props.col;if(u===void 0)return;const{row:m}=e.props;return c("td",{class:d.value+u.__tdClass(m),style:u.__tdStyle(m)},nt(o.default))}}}),Ra=He({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:o,emit:n}){const d=je(),{proxy:{$q:s}}=d,u=m=>{n("click",m)};return()=>{if(e.props===void 0)return c("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:u},nt(o.default));let m,r;const f=d.vnode.key;if(f){if(m=e.props.colsMap[f],m===void 0)return}else m=e.props.col;if(m.sortable===!0){const a=m.align==="right"?"unshift":"push";r=Fl(o.default,[]),r[a](c(jt,{class:m.__iconClass,name:s.iconSet.table.arrowUp}))}else r=nt(o.default);const q={class:m.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:m.headerStyle,onClick:a=>{m.sortable===!0&&e.props.sort(m),u(a)}};return c("th",q,r)}}}),Oa=["horizontal","vertical","cell","none"],Ta=He({name:"QMarkupTable",props:{...Kt,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>Oa.includes(e)}},setup(e,{slots:o}){const n=je(),d=Ut(e,n.proxy.$q),s=g(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(d.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>c("div",{class:s.value},[c("table",{class:"q-table"},nt(o.default))])}});function kl(e,o){return c("div",e,[c("table",{class:"q-table"},o)])}let Ct=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const o=document.createElement("div");Object.assign(o.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(o),e.scrollLeft=-1e3,Ct=e.scrollLeft>=0,e.remove()}const Oe=1e3,Fa=["start","center","end","start-force","center-force","end-force"],ql=Array.prototype.filter,Aa=window.getComputedStyle(document.body).overflowAnchor===void 0?Al:function(e,o){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const n=e.children||[];ql.call(n,s=>s.dataset&&s.dataset.qVsAnchor!==void 0).forEach(s=>{delete s.dataset.qVsAnchor});const d=n[o];d?.dataset&&(d.dataset.qVsAnchor="")}))};function ot(e,o){return e+o}function Bt(e,o,n,d,s,u,m,r){const f=e===window?document.scrollingElement||document.documentElement:e,q=s===!0?"offsetWidth":"offsetHeight",a={scrollStart:0,scrollViewSize:-m-r,scrollMaxSize:0,offsetStart:-m,offsetEnd:-r};if(s===!0?(e===window?(a.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,a.scrollViewSize+=document.documentElement.clientWidth):(a.scrollStart=f.scrollLeft,a.scrollViewSize+=f.clientWidth),a.scrollMaxSize=f.scrollWidth,u===!0&&(a.scrollStart=(Ct===!0?a.scrollMaxSize-a.scrollViewSize:0)-a.scrollStart)):(e===window?(a.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,a.scrollViewSize+=document.documentElement.clientHeight):(a.scrollStart=f.scrollTop,a.scrollViewSize+=f.clientHeight),a.scrollMaxSize=f.scrollHeight),n!==null)for(let b=n.previousElementSibling;b!==null;b=b.previousElementSibling)b.classList.contains("q-virtual-scroll--skip")===!1&&(a.offsetStart+=b[q]);if(d!==null)for(let b=d.nextElementSibling;b!==null;b=b.nextElementSibling)b.classList.contains("q-virtual-scroll--skip")===!1&&(a.offsetEnd+=b[q]);if(o!==e){const b=f.getBoundingClientRect(),k=o.getBoundingClientRect();s===!0?(a.offsetStart+=k.left-b.left,a.offsetEnd-=k.width):(a.offsetStart+=k.top-b.top,a.offsetEnd-=k.height),e!==window&&(a.offsetStart+=a.scrollStart),a.offsetEnd+=a.scrollMaxSize-a.offsetStart}return a}function dl(e,o,n,d){o==="end"&&(o=(e===window?document.body:e)[n===!0?"scrollWidth":"scrollHeight"]),e===window?n===!0?(d===!0&&(o=(Ct===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-o),window.scrollTo(o,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,o):n===!0?(d===!0&&(o=(Ct===!0?e.scrollWidth-e.offsetWidth:0)-o),e.scrollLeft=o):e.scrollTop=o}function dt(e,o,n,d){if(n>=d)return 0;const s=o.length,u=Math.floor(n/Oe),m=Math.floor((d-1)/Oe)+1;let r=e.slice(u,m).reduce(ot,0);return n%Oe!==0&&(r-=o.slice(u*Oe,n).reduce(ot,0)),d%Oe!==0&&d!==s&&(r-=o.slice(d,m*Oe).reduce(ot,0)),r}const Pl={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Vl=Object.keys(Pl),Ht={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Pl};function pl({virtualScrollLength:e,getVirtualScrollTarget:o,getVirtualScrollEl:n,virtualScrollItemSizeComputed:d}){const s=je(),{props:u,emit:m,proxy:r}=s,{$q:f}=r;let q,a,b,k=[],O;const A=H(0),M=H(0),p=H({}),K=H(null),G=H(null),j=H(null),B=H({from:0,to:0}),Z=g(()=>u.tableColspan!==void 0?u.tableColspan:100);d===void 0&&(d=g(()=>u.virtualScrollItemSize));const U=g(()=>d.value+";"+u.virtualScrollHorizontal),ue=g(()=>U.value+";"+u.virtualScrollSliceRatioBefore+";"+u.virtualScrollSliceRatioAfter);ve(ue,()=>{v()}),ve(U,ce);function ce(){V(a,!0)}function be(i){V(i===void 0?a:i)}function oe(i,h){const I=o();if(I==null||I.nodeType===8)return;const $=Bt(I,n(),K.value,G.value,u.virtualScrollHorizontal,f.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd);b!==$.scrollViewSize&&v($.scrollViewSize),re(I,$,Math.min(e.value-1,Math.max(0,parseInt(i,10)||0)),0,Fa.indexOf(h)!==-1?h:a!==-1&&i>a?"end":"start")}function de(){const i=o();if(i==null||i.nodeType===8)return;const h=Bt(i,n(),K.value,G.value,u.virtualScrollHorizontal,f.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd),I=e.value-1,$=h.scrollMaxSize-h.offsetStart-h.offsetEnd-M.value;if(q===h.scrollStart)return;if(h.scrollMaxSize<=0){re(i,h,0,0);return}b!==h.scrollViewSize&&v(h.scrollViewSize),Se(B.value.from);const J=Math.floor(h.scrollMaxSize-Math.max(h.scrollViewSize,h.offsetEnd)-Math.min(O[I],h.scrollViewSize/2));if(J>0&&Math.ceil(h.scrollStart)>=J){re(i,h,I,h.scrollMaxSize-h.offsetEnd-k.reduce(ot,0));return}let z=0,E=h.scrollStart-h.offsetStart,X=E;if(E<=$&&E+h.scrollViewSize>=A.value)E-=A.value,z=B.value.from,X=E;else for(let S=0;E>=k[S]&&z<I;S++)E-=k[S],z+=Oe;for(;E>0&&z<I;)E-=O[z],E>-h.scrollViewSize?(z++,X=E):X=O[z]+E;re(i,h,z,X)}function re(i,h,I,$,J){const z=typeof J=="string"&&J.indexOf("-force")!==-1,E=z===!0?J.replace("-force",""):J,X=E!==void 0?E:"start";let S=Math.max(0,I-p.value[X]),ne=S+p.value.total;ne>e.value&&(ne=e.value,S=Math.max(0,ne-p.value.total)),q=h.scrollStart;const me=S!==B.value.from||ne!==B.value.to;if(me===!1&&E===void 0){N(I);return}const{activeElement:Be}=document,he=j.value;me===!0&&he!==null&&he!==Be&&he.contains(Be)===!0&&(he.addEventListener("focusout",qe),setTimeout(()=>{he?.removeEventListener("focusout",qe)})),Aa(he,I-S);const Ie=E!==void 0?O.slice(S,I).reduce(ot,0):0;if(me===!0){const Pe=ne>=B.value.from&&S<=B.value.to?B.value.to:ne;B.value={from:S,to:Pe},A.value=dt(k,O,0,S),M.value=dt(k,O,ne,e.value),requestAnimationFrame(()=>{B.value.to!==ne&&q===h.scrollStart&&(B.value={from:B.value.from,to:ne},M.value=dt(k,O,ne,e.value))})}requestAnimationFrame(()=>{if(q!==h.scrollStart)return;me===!0&&Se(S);const Pe=O.slice(S,I).reduce(ot,0),Ve=Pe+h.offsetStart+A.value,De=Ve+O[I];let Ne=Ve+$;if(E!==void 0){const it=Pe-Ie,$e=h.scrollStart+it;Ne=z!==!0&&$e<Ve&&De<$e+h.scrollViewSize?$e:E==="end"?De-h.scrollViewSize:Ve-(E==="start"?0:Math.round((h.scrollViewSize-O[I])/2))}q=Ne,dl(i,Ne,u.virtualScrollHorizontal,f.lang.rtl),N(I)})}function Se(i){const h=j.value;if(h){const I=ql.call(h.children,S=>S.classList&&S.classList.contains("q-virtual-scroll--skip")===!1),$=I.length,J=u.virtualScrollHorizontal===!0?S=>S.getBoundingClientRect().width:S=>S.offsetHeight;let z=i,E,X;for(let S=0;S<$;){for(E=J(I[S]),S++;S<$&&I[S].classList.contains("q-virtual-scroll--with-prev")===!0;)E+=J(I[S]),S++;X=E-O[z],X!==0&&(O[z]+=X,k[Math.floor(z/Oe)]+=X),z++}}}function qe(){j.value?.focus()}function V(i,h){const I=1*d.value;(h===!0||Array.isArray(O)===!1)&&(O=[]);const $=O.length;O.length=e.value;for(let z=e.value-1;z>=$;z--)O[z]=I;const J=Math.floor((e.value-1)/Oe);k=[];for(let z=0;z<=J;z++){let E=0;const X=Math.min((z+1)*Oe,e.value);for(let S=z*Oe;S<X;S++)E+=O[S];k.push(E)}a=-1,q=void 0,A.value=dt(k,O,0,B.value.from),M.value=dt(k,O,B.value.to,e.value),i>=0?(Se(B.value.from),Ee(()=>{oe(i)})):Q()}function v(i){if(i===void 0&&typeof window<"u"){const E=o();E!=null&&E.nodeType!==8&&(i=Bt(E,n(),K.value,G.value,u.virtualScrollHorizontal,f.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd).scrollViewSize)}b=i;const h=parseFloat(u.virtualScrollSliceRatioBefore)||0,I=parseFloat(u.virtualScrollSliceRatioAfter)||0,$=1+h+I,J=i===void 0||i<=0?1:Math.ceil(i/d.value),z=Math.max(1,J,Math.ceil((u.virtualScrollSliceSize>0?u.virtualScrollSliceSize:10)/$));p.value={total:Math.ceil(z*$),start:Math.ceil(z*h),center:Math.ceil(z*(.5+h)),end:Math.ceil(z*(1+h)),view:J}}function y(i,h){const I=u.virtualScrollHorizontal===!0?"width":"height",$={["--q-virtual-scroll-item-"+I]:d.value+"px"};return[i==="tbody"?c(i,{class:"q-virtual-scroll__padding",key:"before",ref:K},[c("tr",[c("td",{style:{[I]:`${A.value}px`,...$},colspan:Z.value})])]):c(i,{class:"q-virtual-scroll__padding",key:"before",ref:K,style:{[I]:`${A.value}px`,...$}}),c(i,{class:"q-virtual-scroll__content",key:"content",ref:j,tabindex:-1},h.flat()),i==="tbody"?c(i,{class:"q-virtual-scroll__padding",key:"after",ref:G},[c("tr",[c("td",{style:{[I]:`${M.value}px`,...$},colspan:Z.value})])]):c(i,{class:"q-virtual-scroll__padding",key:"after",ref:G,style:{[I]:`${M.value}px`,...$}})]}function N(i){a!==i&&(u.onVirtualScroll!==void 0&&m("virtualScroll",{index:i,from:B.value.from,to:B.value.to-1,direction:i<a?"decrease":"increase",ref:r}),a=i)}v();const Q=El(de,f.platform.is.ios===!0?120:35);Nt(()=>{v()});let se=!1;return bl(()=>{se=!0}),Sl(()=>{if(se!==!0)return;const i=o();q!==void 0&&i!==void 0&&i!==null&&i.nodeType!==8?dl(i,q,u.virtualScrollHorizontal,f.lang.rtl):oe(a)}),vt(()=>{Q.cancel()}),Object.assign(r,{scrollTo:oe,reset:ce,refresh:be}),{virtualScrollSliceRange:B,virtualScrollSliceSizeComputed:p,setVirtualScrollSize:v,onVirtualScrollEvt:Q,localResetVirtualScroll:V,padVirtualScroll:y,scrollTo:oe,reset:ce,refresh:be}}const Ea={list:wa,table:Ta},Ma=["list","table","__qtable"],Ba=He({name:"QVirtualScroll",props:{...Ht,type:{type:String,default:"list",validator:e=>Ma.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:Cl},setup(e,{slots:o,attrs:n}){let d;const s=H(null),u=g(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:m,localResetVirtualScroll:r,padVirtualScroll:f,onVirtualScrollEvt:q}=pl({virtualScrollLength:u,getVirtualScrollTarget:A,getVirtualScrollEl:O}),a=g(()=>{if(u.value===0)return[];const G=(j,B)=>({index:m.value.from+B,item:j});return e.itemsFn===void 0?e.items.slice(m.value.from,m.value.to).map(G):e.itemsFn(m.value.from,m.value.to-m.value.from).map(G)}),b=g(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),k=g(()=>e.scrollTarget!==void 0?{}:{tabindex:0});ve(u,()=>{r()}),ve(()=>e.scrollTarget,()=>{p(),M()});function O(){return s.value.$el||s.value}function A(){return d}function M(){d=xl(O(),e.scrollTarget),d.addEventListener("scroll",q,Zt.passive)}function p(){d!==void 0&&(d.removeEventListener("scroll",q,Zt.passive),d=void 0)}function K(){let G=f(e.type==="list"?"div":"tbody",a.value.map(o.default));return o.before!==void 0&&(G=o.before().concat(G)),hl(o.after,G)}return Nt(()=>{r()}),$t(()=>{M()}),Sl(()=>{M()}),bl(()=>{p()}),vt(()=>{p()}),()=>{if(o.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?kl({ref:s,class:"q-table__middle "+b.value},K()):c(Ea[e.type],{...n,ref:s,class:[n.class,b.value],...k.value},K)}}}),Ia=He({name:"QField",inheritAttrs:!1,props:{...Qt,tag:{type:String,default:"label"}},emits:yl,setup(){return wl(_l({tagProp:!0}))}}),Da=He({name:"QMenu",inheritAttrs:!1,props:{...ta,...ea,...Kt,...Jl,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:al},self:{type:String,validator:al},offset:{type:Array,validator:Zl},scrollTarget:Cl,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Gl,"click","escapeKey"],setup(e,{slots:o,emit:n,attrs:d}){let s=null,u,m,r;const f=je(),{proxy:q}=f,{$q:a}=q,b=H(null),k=H(!1),O=g(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),A=Ut(e,a),{registerTick:M,removeTick:p}=la(),{registerTimeout:K}=aa(),{transitionProps:G,transitionStyle:j}=oa(e),{localScrollTarget:B,changeScrollEvent:Z,unconfigureScrollTarget:U}=na(e,I),{anchorEl:ue,canShow:ce}=ia({showing:k}),{hide:be}=ua({showing:k,canShow:ce,handleShow:se,handleHide:i,hideOnRouteChange:O,processOnMount:!0}),{showPortal:oe,hidePortal:de,renderPortal:re}=ra(f,b,X,"menu"),Se={anchorEl:ue,innerRef:b,onClickOutside(S){if(e.persistent!==!0&&k.value===!0)return be(S),(S.type==="touchstart"||S.target.classList.contains("q-dialog__backdrop"))&&We(S),!0}},qe=g(()=>ol(e.anchor||(e.cover===!0?"center middle":"bottom start"),a.lang.rtl)),V=g(()=>e.cover===!0?qe.value:ol(e.self||"top start",a.lang.rtl)),v=g(()=>(e.square===!0?" q-menu--square":"")+(A.value===!0?" q-menu--dark q-dark":"")),y=g(()=>e.autoClose===!0?{onClick:$}:{}),N=g(()=>k.value===!0&&e.persistent!==!0);ve(N,S=>{S===!0?(sa(z),ca(Se)):(nl(z),il(Se))});function Q(){ga(()=>{let S=b.value;S&&S.contains(document.activeElement)!==!0&&(S=S.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||S.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||S.querySelector("[autofocus], [data-autofocus]")||S,S.focus({preventScroll:!0}))})}function se(S){if(s=e.noRefocus===!1?document.activeElement:null,da(J),oe(),I(),u=void 0,S!==void 0&&(e.touchPosition||e.contextMenu)){const ne=Ml(S);if(ne.left!==void 0){const{top:me,left:Be}=ue.value.getBoundingClientRect();u={left:ne.left-Be,top:ne.top-me}}}m===void 0&&(m=ve(()=>a.screen.width+"|"+a.screen.height+"|"+e.self+"|"+e.anchor+"|"+a.lang.rtl,E)),e.noFocus!==!0&&document.activeElement.blur(),M(()=>{E(),e.noFocus!==!0&&Q()}),K(()=>{a.platform.is.ios===!0&&(r=e.autoClose,b.value.click()),E(),oe(!0),n("show",S)},e.transitionDuration)}function i(S){p(),de(),h(!0),s!==null&&(S===void 0||S.qClickOutside!==!0)&&(((S?.type.indexOf("key")===0?s.closest('[tabindex]:not([tabindex^="-"])'):void 0)||s).focus(),s=null),K(()=>{de(!0),n("hide",S)},e.transitionDuration)}function h(S){u=void 0,m!==void 0&&(m(),m=void 0),(S===!0||k.value===!0)&&(fa(J),U(),il(Se),nl(z)),S!==!0&&(s=null)}function I(){(ue.value!==null||e.scrollTarget!==void 0)&&(B.value=xl(ue.value,e.scrollTarget),Z(B.value,E))}function $(S){r!==!0?(va(q,S),n("click",S)):r=!1}function J(S){N.value===!0&&e.noFocus!==!0&&Bl(b.value,S.target)!==!0&&Q()}function z(S){e.noEscDismiss!==!0&&(n("escapeKey"),be(S))}function E(){ma({targetEl:b.value,offset:e.offset,anchorEl:ue.value,anchorOrigin:qe.value,selfOrigin:V.value,absoluteOffset:u,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function X(){return c(Il,G.value,()=>k.value===!0?c("div",{role:"menu",...d,ref:b,tabindex:-1,class:["q-menu q-position-engine scroll"+v.value,d.class],style:[d.style,j.value],...y.value},nt(o.default)):null)}return vt(h),Object.assign(q,{focus:Q,updatePosition:E}),re}}),fl=e=>["add","add-unique","toggle"].includes(e),za=".*+?^${}()|[]\\",La=Object.keys(Qt);function It(e,o){if(typeof e=="function")return e;const n=e!==void 0?e:o;return d=>d!==null&&typeof d=="object"&&n in d?d[n]:d}const Ha=He({name:"QSelect",inheritAttrs:!1,props:{...Ht,...ba,...Qt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:fl},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:Ht.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...yl,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:o,emit:n}){const{proxy:d}=je(),{$q:s}=d,u=H(!1),m=H(!1),r=H(-1),f=H(""),q=H(!1),a=H(!1);let b=null,k=null,O,A,M,p=null,K,G,j,B;const Z=H(null),U=H(null),ue=H(null),ce=H(null),be=H(null),oe=Sa(e),de=ha(l),re=g(()=>Array.isArray(e.options)?e.options.length:0),Se=g(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:qe,virtualScrollSliceSizeComputed:V,localResetVirtualScroll:v,padVirtualScroll:y,onVirtualScrollEvt:N,scrollTo:Q,setVirtualScrollSize:se}=pl({virtualScrollLength:re,getVirtualScrollTarget:qt,getVirtualScrollEl:ht,virtualScrollItemSizeComputed:Se}),i=_l(),h=g(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,_=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const C=e.mapOptions===!0&&O!==void 0?O:[],L=_.map(Y=>kt(Y,C));return e.modelValue===null&&t===!0?L.filter(Y=>Y!==null):L}return _}),I=g(()=>{const t={};return La.forEach(_=>{const C=e[_];C!==void 0&&(t[_]=C)}),t}),$=g(()=>e.optionsDark===null?i.isDark.value:e.optionsDark),J=g(()=>ul(h.value)),z=g(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||h.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),E=g(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),X=g(()=>re.value===0),S=g(()=>h.value.map(t=>ge.value(t)).join(", ")),ne=g(()=>e.displayValue!==void 0?e.displayValue:S.value),me=g(()=>e.optionsHtml===!0?()=>!0:t=>t?.html===!0),Be=g(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||h.value.some(me.value))),he=g(()=>i.focused.value===!0?e.tabindex:-1),Ie=g(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":u.value===!0?"true":"false","aria-controls":`${i.targetUid.value}_lb`};return r.value>=0&&(t["aria-activedescendant"]=`${i.targetUid.value}_${r.value}`),t}),Pe=g(()=>({id:`${i.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Ve=g(()=>h.value.map((t,_)=>({index:_,opt:t,html:me.value(t),selected:!0,removeAtIndex:xt,toggleOption:pe,tabindex:he.value}))),De=g(()=>{if(re.value===0)return[];const{from:t,to:_}=qe.value;return e.options.slice(t,_).map((C,L)=>{const Y=ze.value(C)===!0,W=Ge(C)===!0,fe=t+L,ie={clickable:!0,active:W,activeClass:$e.value,manualFocus:!0,focused:!1,disable:Y,tabindex:-1,dense:e.optionsDense,dark:$.value,role:"option","aria-selected":W===!0?"true":"false",id:`${i.targetUid.value}_${fe}`,onClick:()=>{pe(C)}};return Y!==!0&&(r.value===fe&&(ie.focused=!0),s.platform.is.desktop===!0&&(ie.onMousemove=()=>{u.value===!0&&we(fe)})),{index:fe,opt:C,html:me.value(C),label:ge.value(C),selected:ie.active,focused:ie.focused,toggleOption:pe,setOptionIndex:we,itemProps:ie}})}),Ne=g(()=>e.dropdownIcon!==void 0?e.dropdownIcon:s.iconSet.arrow.dropdown),it=g(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),$e=g(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),xe=g(()=>It(e.optionValue,"value")),ge=g(()=>It(e.optionLabel,"label")),ze=g(()=>It(e.optionDisable,"disable")),Qe=g(()=>h.value.map(xe.value)),mt=g(()=>{const t={onInput:l,onChange:de,onKeydown:Ke,onKeyup:Ze,onKeypress:rt,onFocus:ut,onClick(_){A===!0&&at(_)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=de,t});ve(h,t=>{O=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&i.innerLoading.value!==!0&&(m.value!==!0&&u.value!==!0||J.value!==!0)&&(M!==!0&&lt(),(m.value===!0||u.value===!0)&&T(""))},{immediate:!0}),ve(()=>e.fillInput,lt),ve(u,Rt),ve(re,Tl);function gt(t){return e.emitValue===!0?xe.value(t):t}function Ye(t){if(t!==-1&&t<h.value.length)if(e.multiple===!0){const _=e.modelValue.slice();n("remove",{index:t,value:_.splice(t,1)[0]}),n("update:modelValue",_)}else n("update:modelValue",null)}function xt(t){Ye(t),i.focus()}function bt(t,_){const C=gt(t);if(e.multiple!==!0){e.fillInput===!0&&F(ge.value(t),!0,!0),n("update:modelValue",C);return}if(h.value.length===0){n("add",{index:0,value:C}),n("update:modelValue",e.multiple===!0?[C]:C);return}if(_===!0&&Ge(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const L=e.modelValue.slice();n("add",{index:L.length,value:C}),L.push(C),n("update:modelValue",L)}function pe(t,_){if(i.editable.value!==!0||t===void 0||ze.value(t)===!0)return;const C=xe.value(t);if(e.multiple!==!0){_!==!0&&(F(e.fillInput===!0?ge.value(t):"",!0,!0),Ue()),U.value?.focus(),(h.value.length===0||st(xe.value(h.value[0]),C)!==!0)&&n("update:modelValue",e.emitValue===!0?C:t);return}if((A!==!0||q.value===!0)&&i.focus(),ut(),h.value.length===0){const W=e.emitValue===!0?C:t;n("add",{index:0,value:W}),n("update:modelValue",e.multiple===!0?[W]:W);return}const L=e.modelValue.slice(),Y=Qe.value.findIndex(W=>st(W,C));if(Y!==-1)n("remove",{index:Y,value:L.splice(Y,1)[0]});else{if(e.maxValues!==void 0&&L.length>=e.maxValues)return;const W=e.emitValue===!0?C:t;n("add",{index:L.length,value:W}),L.push(W)}n("update:modelValue",L)}function we(t){if(s.platform.is.desktop!==!0)return;const _=t!==-1&&t<re.value?t:-1;r.value!==_&&(r.value=_)}function Re(t=1,_){if(u.value===!0){let C=r.value;do C=rl(C+t,-1,re.value-1);while(C!==-1&&C!==r.value&&ze.value(e.options[C])===!0);r.value!==C&&(we(C),Q(C),_!==!0&&e.useInput===!0&&e.fillInput===!0&&w(C>=0?ge.value(e.options[C]):K,!0))}}function kt(t,_){const C=L=>st(xe.value(L),t);return e.options.find(C)||_.find(C)||t}function Ge(t){const _=xe.value(t);return Qe.value.find(C=>st(C,_))!==void 0}function ut(t){e.useInput===!0&&U.value!==null&&(t===void 0||U.value===t.target&&t.target.value===S.value)&&U.value.select()}function St(t){Hl(t,27)===!0&&u.value===!0&&(at(t),Ue(),lt()),n("keyup",t)}function Ze(t){const{value:_}=t.target;if(t.keyCode!==void 0){St(t);return}if(t.target.value="",b!==null&&(clearTimeout(b),b=null),k!==null&&(clearTimeout(k),k=null),lt(),typeof _=="string"&&_.length!==0){const C=_.toLocaleLowerCase(),L=W=>{const fe=e.options.find(ie=>String(W.value(ie)).toLocaleLowerCase()===C);return fe===void 0?!1:(h.value.indexOf(fe)===-1?pe(fe):Ue(),!0)},Y=W=>{L(xe)!==!0&&W!==!0&&L(ge)!==!0&&T(_,!0,()=>Y(!0))};Y()}else i.clearValue(t)}function rt(t){n("keypress",t)}function Ke(t){if(n("keydown",t),Dl(t)===!0)return;const _=f.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),C=t.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(r.value!==-1||_===!0);if(t.keyCode===27){Tt(t);return}if(t.keyCode===9&&C===!1){et();return}if(t.target===void 0||t.target.id!==i.targetUid.value||i.editable.value!==!0)return;if(t.keyCode===40&&i.innerLoading.value!==!0&&u.value===!1){We(t),tt();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&f.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Ye(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&n("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof f.value!="string"||f.value.length===0)&&(We(t),r.value=-1,Re(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&V.value!==void 0&&(We(t),r.value=Math.max(-1,Math.min(re.value,r.value+(t.keyCode===33?-1:1)*V.value.view)),Re(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(We(t),Re(t.keyCode===38?-1:1,e.multiple));const L=re.value;if((j===void 0||B<Date.now())&&(j=""),L>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||j.length!==0)){u.value!==!0&&tt(t);const Y=t.key.toLocaleLowerCase(),W=j.length===1&&j[0]===Y;B=Date.now()+1500,W===!1&&(We(t),j+=Y);const fe=new RegExp("^"+j.split("").map(Ot=>za.indexOf(Ot)!==-1?"\\"+Ot:Ot).join(".*"),"i");let ie=r.value;if(W===!0||ie<0||fe.test(ge.value(e.options[ie]))!==!0)do ie=rl(ie+1,-1,L-1);while(ie!==r.value&&(ze.value(e.options[ie])===!0||fe.test(ge.value(e.options[ie]))!==!0));r.value!==ie&&Ee(()=>{we(ie),Q(ie),ie>=0&&e.useInput===!0&&e.fillInput===!0&&w(ge.value(e.options[ie]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||j!=="")&&(t.keyCode!==9||C===!1))){if(t.keyCode!==9&&We(t),r.value!==-1&&r.value<L){pe(e.options[r.value]);return}if(_===!0){const Y=(W,fe)=>{if(fe){if(fl(fe)!==!0)return}else fe=e.newValueMode;if(F("",e.multiple!==!0,!0),W==null)return;(fe==="toggle"?pe:bt)(W,fe==="add-unique"),e.multiple!==!0&&(U.value?.focus(),Ue())};if(e.onNewValue!==void 0?n("newValue",f.value,Y):Y(f.value),e.multiple!==!0)return}u.value===!0?et():i.innerLoading.value!==!0&&tt()}}function ht(){return A===!0?be.value:ue.value!==null&&ue.value.contentEl!==null?ue.value.contentEl:void 0}function qt(){return ht()}function Pt(){return e.hideSelected===!0?[]:o["selected-item"]!==void 0?Ve.value.map(t=>o["selected-item"](t)).slice():o.selected!==void 0?[].concat(o.selected()):e.useChips===!0?Ve.value.map((t,_)=>c(Xe,{key:"option-"+_,removable:i.editable.value===!0&&ze.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:he.value,onRemove(){t.removeAtIndex(_)}},()=>c("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:ge.value(t.opt)}))):[c("span",{class:"ellipsis",[Be.value===!0?"innerHTML":"textContent"]:ne.value})]}function yt(){if(X.value===!0)return o["no-option"]!==void 0?o["no-option"]({inputValue:f.value}):void 0;const t=o.option!==void 0?o.option:C=>c(xa,{key:C.index,...C.itemProps},()=>c(_a,()=>c(Ca,()=>c("span",{[C.html===!0?"innerHTML":"textContent"]:C.label}))));let _=y("div",De.value.map(t));return o["before-options"]!==void 0&&(_=o["before-options"]().concat(_)),hl(o["after-options"],_)}function Vt(t,_){const C=_===!0?{...Ie.value,...i.splitAttrs.attributes.value}:void 0,L={ref:_===!0?U:void 0,key:"i_t",class:z.value,style:e.inputStyle,value:f.value!==void 0?f.value:"",type:"search",...C,id:_===!0?i.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...mt.value};return t!==!0&&A===!0&&(Array.isArray(L.class)===!0?L.class=[...L.class,"no-pointer-events"]:L.class+=" no-pointer-events"),c("input",L)}function l(t){b!==null&&(clearTimeout(b),b=null),k!==null&&(clearTimeout(k),k=null),!(t&&t.target&&t.target.qComposing===!0)&&(w(t.target.value||""),M=!0,K=f.value,i.focused.value!==!0&&(A!==!0||q.value===!0)&&i.focus(),e.onFilter!==void 0&&(b=setTimeout(()=>{b=null,T(f.value)},e.inputDebounce)))}function w(t,_){f.value!==t&&(f.value=t,_===!0||e.inputDebounce===0||e.inputDebounce==="0"?n("inputValue",t):k=setTimeout(()=>{k=null,n("inputValue",t)},e.inputDebounce))}function F(t,_,C){M=C!==!0,e.useInput===!0&&(w(t,!0),(_===!0||C!==!0)&&(K=t),_!==!0&&T(t))}function T(t,_,C){if(e.onFilter===void 0||_!==!0&&i.focused.value!==!0)return;i.innerLoading.value===!0?n("filterAbort"):(i.innerLoading.value=!0,a.value=!0),t!==""&&e.multiple!==!0&&h.value.length!==0&&M!==!0&&t===ge.value(h.value[0])&&(t="");const L=setTimeout(()=>{u.value===!0&&(u.value=!1)},10);p!==null&&clearTimeout(p),p=L,n("filter",t,(Y,W)=>{(_===!0||i.focused.value===!0)&&p===L&&(clearTimeout(p),typeof Y=="function"&&Y(),a.value=!1,Ee(()=>{i.innerLoading.value=!1,i.editable.value===!0&&(_===!0?u.value===!0&&Ue():u.value===!0?Rt(!0):u.value=!0),typeof W=="function"&&Ee(()=>{W(d)}),typeof C=="function"&&Ee(()=>{C(d)})}))},()=>{i.focused.value===!0&&p===L&&(clearTimeout(p),i.innerLoading.value=!1,a.value=!1),u.value===!0&&(u.value=!1)})}function D(){return c(Da,{ref:ue,class:E.value,style:e.popupContentStyle,modelValue:u.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&X.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:$.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:it.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Pe.value,onScrollPassive:N,onBeforeShow:Xt,onBeforeHide:le,onShow:ee},yt)}function le(t){Yt(t),et()}function ee(){se()}function _e(t){at(t),U.value?.focus(),q.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function te(t){at(t),Ee(()=>{q.value=!1})}function Me(){const t=[c(Ia,{class:`col-auto ${i.fieldClass.value}`,...I.value,for:i.targetUid.value,dark:$.value,square:!0,loading:a.value,itemAligned:!1,filled:!0,stackLabel:f.value.length!==0,...i.splitAttrs.listeners.value,onFocus:_e,onBlur:te},{...o,rawControl:()=>i.getControl(!0),before:void 0,after:void 0})];return u.value===!0&&t.push(c("div",{ref:be,class:E.value+" scroll",style:e.popupContentStyle,...Pe.value,onClick:Tt,onScrollPassive:N},yt())),c(Lt,{ref:ce,modelValue:m.value,position:e.useInput===!0?"top":void 0,transitionShow:G,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:Xt,onBeforeHide:Je,onHide:pt,onShow:Ol},()=>c("div",{class:"q-select__dialog"+($.value===!0?" q-select__dialog--dark q-dark":"")+(q.value===!0?" q-select__dialog--focused":"")},t))}function Je(t){Yt(t),ce.value!==null&&ce.value.__updateRefocusTarget(i.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),i.focused.value=!1}function pt(t){Ue(),i.focused.value===!1&&n("blur",t),lt()}function Ol(){const t=document.activeElement;(t===null||t.id!==i.targetUid.value)&&U.value!==null&&U.value!==t&&U.value.focus(),se()}function et(){m.value!==!0&&(r.value=-1,u.value===!0&&(u.value=!1),i.focused.value===!1&&(p!==null&&(clearTimeout(p),p=null),i.innerLoading.value===!0&&(n("filterAbort"),i.innerLoading.value=!1,a.value=!1)))}function tt(t){i.editable.value===!0&&(A===!0?(i.onControlFocusin(t),m.value=!0,Ee(()=>{i.focus()})):i.focus(),e.onFilter!==void 0?T(f.value):(X.value!==!0||o["no-option"]!==void 0)&&(u.value=!0))}function Ue(){m.value=!1,et()}function lt(){e.useInput===!0&&F(e.multiple!==!0&&e.fillInput===!0&&h.value.length!==0&&ge.value(h.value[0])||"",!0,!0)}function Rt(t){let _=-1;if(t===!0){if(h.value.length!==0){const C=xe.value(h.value[0]);_=e.options.findIndex(L=>st(xe.value(L),C))}v(_)}we(_)}function Tl(t,_){u.value===!0&&i.innerLoading.value===!1&&(v(-1,!0),Ee(()=>{u.value===!0&&i.innerLoading.value===!1&&(t>_?v():Rt(!0))}))}function Wt(){m.value===!1&&ue.value!==null&&ue.value.updatePosition()}function Xt(t){t!==void 0&&at(t),n("popupShow",t),i.hasPopupOpen=!0,i.onControlFocusin(t)}function Yt(t){t!==void 0&&at(t),n("popupHide",t),i.hasPopupOpen=!1,i.onControlFocusout(t)}function Gt(){A=s.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?o["no-option"]!==void 0||e.onFilter!==void 0||X.value===!1:!0),G=s.platform.is.ios===!0&&A===!0&&e.useInput===!0?"fade":e.transitionShow}return zl(Gt),Ll(Wt),Gt(),vt(()=>{b!==null&&clearTimeout(b),k!==null&&clearTimeout(k)}),Object.assign(d,{showPopup:tt,hidePopup:Ue,removeAtIndex:Ye,add:bt,toggleOption:pe,getOptionIndex:()=>r.value,setOptionIndex:we,moveOptionSelection:Re,filter:T,updateMenuPosition:Wt,updateInputValue:F,isOptionSelected:Ge,getEmittingOptionValue:gt,isOptionDisabled:(...t)=>ze.value.apply(null,t)===!0,getOptionValue:(...t)=>xe.value.apply(null,t),getOptionLabel:(...t)=>ge.value.apply(null,t)}),Object.assign(i,{innerValue:h,fieldClass:g(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:Z,targetRef:U,hasValue:J,showPopup:tt,floatingLabel:g(()=>e.hideSelected!==!0&&J.value===!0||typeof f.value=="number"||f.value.length!==0||ul(e.displayValue)),getControlChild:()=>{if(i.editable.value!==!1&&(m.value===!0||X.value!==!0||o["no-option"]!==void 0))return A===!0?Me():D();i.hasPopupOpen===!0&&(i.hasPopupOpen=!1)},controlEvents:{onFocusin(t){i.onControlFocusin(t)},onFocusout(t){i.onControlFocusout(t,()=>{lt(),et()})},onClick(t){if(Tt(t),A!==!0&&u.value===!0){et(),U.value?.focus();return}tt(t)}},getControl:t=>{const _=Pt(),C=t===!0||m.value!==!0||A!==!0;if(e.useInput===!0)_.push(Vt(t,C));else if(i.editable.value===!0){const Y=C===!0?Ie.value:void 0;_.push(c("input",{ref:C===!0?U:void 0,key:"d_t",class:"q-select__focus-target",id:C===!0?i.targetUid.value:void 0,value:ne.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...Y,onKeydown:Ke,onKeyup:St,onKeypress:rt})),C===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&_.push(c("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Ze}))}if(oe.value!==void 0&&e.disable!==!0&&Qe.value.length!==0){const Y=Qe.value.map(W=>c("option",{value:W,selected:!0}));_.push(c("select",{class:"hidden",name:oe.value,multiple:e.multiple},Y))}const L=e.useInput===!0||C!==!0?void 0:i.splitAttrs.attributes.value;return c("div",{class:"q-field__native row items-center",...L,...i.splitAttrs.listeners.value},_)},getInnerAppend:()=>e.loading!==!0&&a.value!==!0&&e.hideDropdownIcon!==!0?[c(jt,{class:"q-select__dropdown-icon"+(u.value===!0?" rotate-180":""),name:Ne.value})]:null}),wl(i)}});let ft=0;const ja={fullscreen:Boolean,noRouteFullscreenExit:Boolean},Na=["update:fullscreen","fullscreen"];function $a(){const e=je(),{props:o,emit:n,proxy:d}=e;let s,u,m;const r=H(!1);jl(e)===!0&&ve(()=>d.$route.fullPath,()=>{o.noRouteFullscreenExit!==!0&&a()}),ve(()=>o.fullscreen,b=>{r.value!==b&&f()}),ve(r,b=>{n("update:fullscreen",b),n("fullscreen",b)});function f(){r.value===!0?a():q()}function q(){r.value!==!0&&(r.value=!0,m=d.$el.parentNode,m.replaceChild(u,d.$el),document.body.appendChild(d.$el),ft++,ft===1&&document.body.classList.add("q-body--fullscreen-mixin"),s={handler:a},Jt.add(s))}function a(){r.value===!0&&(s!==void 0&&(Jt.remove(s),s=void 0),m.replaceChild(d.$el,u),r.value=!1,ft=Math.max(0,ft-1),ft===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),d.$el.scrollIntoView!==void 0&&setTimeout(()=>{d.$el.scrollIntoView()})))}return Nt(()=>{u=document.createElement("span")}),$t(()=>{o.fullscreen===!0&&q()}),vt(a),Object.assign(d,{toggleFullscreen:f,setFullscreen:q,exitFullscreen:a}),{inFullscreen:r,toggleFullscreen:f}}function Qa(e,o){return new Date(e)-new Date(o)}const Ka={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Ua(e,o,n,d){const s=g(()=>{const{sortBy:r}=o.value;return r&&n.value.find(f=>f.name===r)||null}),u=g(()=>e.sortMethod!==void 0?e.sortMethod:(r,f,q)=>{const a=n.value.find(O=>O.name===f);if(a===void 0||a.field===void 0)return r;const b=q===!0?-1:1,k=typeof a.field=="function"?O=>a.field(O):O=>O[a.field];return r.sort((O,A)=>{let M=k(O),p=k(A);return a.rawSort!==void 0?a.rawSort(M,p,O,A)*b:M==null?-1*b:p==null?1*b:a.sort!==void 0?a.sort(M,p,O,A)*b:zt(M)===!0&&zt(p)===!0?(M-p)*b:el(M)===!0&&el(p)===!0?Qa(M,p)*b:typeof M=="boolean"&&typeof p=="boolean"?(M-p)*b:([M,p]=[M,p].map(K=>(K+"").toLocaleString().toLowerCase()),M<p?-1*b:M===p?0:b)})});function m(r){let f=e.columnSortOrder;if(Nl(r)===!0)r.sortOrder&&(f=r.sortOrder),r=r.name;else{const b=n.value.find(k=>k.name===r);b?.sortOrder&&(f=b.sortOrder)}let{sortBy:q,descending:a}=o.value;q!==r?(q=r,a=f==="da"):e.binaryStateSort===!0?a=!a:a===!0?f==="ad"?q=null:a=!1:f==="ad"?a=!0:q=null,d({sortBy:q,descending:a,page:1})}return{columnToSort:s,computedSortMethod:u,sort:m}}const Wa={filter:[String,Object],filterMethod:Function};function Xa(e,o){const n=g(()=>e.filterMethod!==void 0?e.filterMethod:(d,s,u,m)=>{const r=s?s.toLowerCase():"";return d.filter(f=>u.some(q=>{const a=m(q,f)+"";return(a==="undefined"||a==="null"?"":a.toLowerCase()).indexOf(r)!==-1}))});return ve(()=>e.filter,()=>{Ee(()=>{o({page:1},!0)})},{deep:!0}),{computedFilterMethod:n}}function Ya(e,o){for(const n in o)if(o[n]!==e[n])return!1;return!0}function vl(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Ga={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Za(e,o){const{props:n,emit:d}=e,s=H(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:n.rowsPerPageOptions.length!==0?n.rowsPerPageOptions[0]:5},n.pagination)),u=g(()=>{const a=n["onUpdate:pagination"]!==void 0?{...s.value,...n.pagination}:s.value;return vl(a)}),m=g(()=>u.value.rowsNumber!==void 0);function r(a){f({pagination:a,filter:n.filter})}function f(a={}){Ee(()=>{d("request",{pagination:a.pagination||u.value,filter:a.filter||n.filter,getCellValue:o})})}function q(a,b){const k=vl({...u.value,...a});if(Ya(u.value,k)===!0){m.value===!0&&b===!0&&r(k);return}if(m.value===!0){r(k);return}n.pagination!==void 0&&n["onUpdate:pagination"]!==void 0?d("update:pagination",k):s.value=k}return{innerPagination:s,computedPagination:u,isServerSide:m,requestServerInteraction:f,setPagination:q}}function Ja(e,o,n,d,s,u){const{props:m,emit:r,proxy:{$q:f}}=e,q=g(()=>d.value===!0?n.value.rowsNumber||0:u.value),a=g(()=>{const{page:B,rowsPerPage:Z}=n.value;return(B-1)*Z}),b=g(()=>{const{page:B,rowsPerPage:Z}=n.value;return B*Z}),k=g(()=>n.value.page===1),O=g(()=>n.value.rowsPerPage===0?1:Math.max(1,Math.ceil(q.value/n.value.rowsPerPage))),A=g(()=>b.value===0?!0:n.value.page>=O.value),M=g(()=>(m.rowsPerPageOptions.includes(o.value.rowsPerPage)?m.rowsPerPageOptions:[o.value.rowsPerPage].concat(m.rowsPerPageOptions)).map(Z=>({label:Z===0?f.lang.table.allRows:""+Z,value:Z})));ve(O,(B,Z)=>{if(B===Z)return;const U=n.value.page;B&&!U?s({page:1}):B<U&&s({page:B})});function p(){s({page:1})}function K(){const{page:B}=n.value;B>1&&s({page:B-1})}function G(){const{page:B,rowsPerPage:Z}=n.value;b.value>0&&B*Z<q.value&&s({page:B+1})}function j(){s({page:O.value})}return m["onUpdate:pagination"]!==void 0&&r("update:pagination",{...n.value}),{firstRowIndex:a,lastRowIndex:b,isFirstPage:k,isLastPage:A,pagesNumber:O,computedRowsPerPageOptions:M,computedRowsNumber:q,firstPage:p,prevPage:K,nextPage:G,lastPage:j}}const eo={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},to=["update:selected","selection"];function lo(e,o,n,d){const s=g(()=>{const A={};return e.selected.map(d.value).forEach(M=>{A[M]=!0}),A}),u=g(()=>e.selection!=="none"),m=g(()=>e.selection==="single"),r=g(()=>e.selection==="multiple"),f=g(()=>n.value.length!==0&&n.value.every(A=>s.value[d.value(A)]===!0)),q=g(()=>f.value!==!0&&n.value.some(A=>s.value[d.value(A)]===!0)),a=g(()=>e.selected.length);function b(A){return s.value[A]===!0}function k(){o("update:selected",[])}function O(A,M,p,K){o("selection",{rows:M,added:p,keys:A,evt:K});const G=m.value===!0?p===!0?M:[]:p===!0?e.selected.concat(M):e.selected.filter(j=>A.includes(d.value(j))===!1);o("update:selected",G)}return{hasSelectionMode:u,singleSelection:m,multipleSelection:r,allRowsSelected:f,someRowsSelected:q,rowsSelectedNumber:a,isRowSelected:b,clearSelection:k,updateSelection:O}}function ml(e){return Array.isArray(e)?e.slice():[]}const ao={expanded:Array},oo=["update:expanded"];function no(e,o){const n=H(ml(e.expanded));ve(()=>e.expanded,m=>{n.value=ml(m)});function d(m){return n.value.includes(m)}function s(m){e.expanded!==void 0?o("update:expanded",m):n.value=m}function u(m,r){const f=n.value.slice(),q=f.indexOf(m);r===!0?q===-1&&(f.push(m),s(f)):q!==-1&&(f.splice(q,1),s(f))}return{isRowExpanded:d,setExpanded:s,updateExpanded:u}}const io={visibleColumns:Array};function uo(e,o,n){const d=g(()=>{if(e.columns!==void 0)return e.columns;const r=e.rows[0];return r!==void 0?Object.keys(r).map(f=>({name:f,label:f.toUpperCase(),field:f,align:zt(r[f])?"right":"left",sortable:!0})):[]}),s=g(()=>{const{sortBy:r,descending:f}=o.value;return(e.visibleColumns!==void 0?d.value.filter(a=>a.required===!0||e.visibleColumns.includes(a.name)===!0):d.value).map(a=>{const b=a.align||"right",k=`text-${b}`;return{...a,align:b,__iconClass:`q-table__sort-icon q-table__sort-icon--${b}`,__thClass:k+(a.headerClasses!==void 0?" "+a.headerClasses:"")+(a.sortable===!0?" sortable":"")+(a.name===r?` sorted ${f===!0?"sort-desc":""}`:""),__tdStyle:a.style!==void 0?typeof a.style!="function"?()=>a.style:a.style:()=>null,__tdClass:a.classes!==void 0?typeof a.classes!="function"?()=>k+" "+a.classes:O=>k+" "+a.classes(O):()=>k}})}),u=g(()=>{const r={};return s.value.forEach(f=>{r[f.name]=f}),r}),m=g(()=>e.tableColspan!==void 0?e.tableColspan:s.value.length+(n.value===!0?1:0));return{colList:d,computedCols:s,computedColsMap:u,computedColspan:m}}const wt="q-table__bottom row items-center",Rl={};Vl.forEach(e=>{Rl[e]={}});const gl=He({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...Rl,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],tableRowStyleFn:Function,tableRowClassFn:Function,cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],cardStyleFn:Function,cardClassFn:Function,hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Kt,...ja,...io,...Wa,...Ga,...ao,...eo,...Ka},emits:["request","virtualScroll",...Na,...oo,...to],setup(e,{slots:o,emit:n}){const d=je(),{proxy:{$q:s}}=d,u=Ut(e,s),{inFullscreen:m,toggleFullscreen:r}=$a(),f=g(()=>typeof e.rowKey=="function"?e.rowKey:l=>l[e.rowKey]),q=H(null),a=H(null),b=g(()=>e.grid!==!0&&e.virtualScroll===!0),k=g(()=>" q-table__card"+(u.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),O=g(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":k.value)+(u.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(m.value===!0?" fullscreen scroll":"")),A=g(()=>O.value+(e.loading===!0?" q-table--loading":""));ve(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+O.value,()=>{b.value===!0&&a.value?.reset()});const{innerPagination:M,computedPagination:p,isServerSide:K,requestServerInteraction:G,setPagination:j}=Za(d,we),{computedFilterMethod:B}=Xa(e,j),{isRowExpanded:Z,setExpanded:U,updateExpanded:ue}=no(e,n),ce=g(()=>{let l=e.rows;if(K.value===!0||l.length===0)return l;const{sortBy:w,descending:F}=p.value;return e.filter&&(l=B.value(l,e.filter,i.value,we)),$.value!==null&&(l=J.value(e.rows===l?l.slice():l,w,F)),l}),be=g(()=>ce.value.length),oe=g(()=>{let l=ce.value;if(K.value===!0)return l;const{rowsPerPage:w}=p.value;return w!==0&&(E.value===0&&e.rows!==l?l.length>X.value&&(l=l.slice(0,X.value)):l=l.slice(E.value,X.value)),l}),{hasSelectionMode:de,singleSelection:re,multipleSelection:Se,allRowsSelected:qe,someRowsSelected:V,rowsSelectedNumber:v,isRowSelected:y,clearSelection:N,updateSelection:Q}=lo(e,n,oe,f),{colList:se,computedCols:i,computedColsMap:h,computedColspan:I}=uo(e,p,de),{columnToSort:$,computedSortMethod:J,sort:z}=Ua(e,p,se,j),{firstRowIndex:E,lastRowIndex:X,isFirstPage:S,isLastPage:ne,pagesNumber:me,computedRowsPerPageOptions:Be,computedRowsNumber:he,firstPage:Ie,prevPage:Pe,nextPage:Ve,lastPage:De}=Ja(d,M,p,K,j,be),Ne=g(()=>oe.value.length===0),it=g(()=>{const l={};return Vl.forEach(w=>{l[w]=e[w]}),l.virtualScrollItemSize===void 0&&(l.virtualScrollItemSize=e.dense===!0?28:48),l});function $e(){b.value===!0&&a.value.reset()}function xe(){if(e.grid===!0)return Vt();const l=e.hideHeader!==!0?ut:null;if(b.value===!0){const F=o["top-row"],T=o["bottom-row"],D={default:le=>mt(le.item,o.body,le.index)};if(F!==void 0){const le=c("tbody",F({cols:i.value}));D.before=l===null?()=>le:()=>[l()].concat(le)}else l!==null&&(D.before=l);return T!==void 0&&(D.after=()=>c("tbody",T({cols:i.value}))),c(Ba,{ref:a,class:e.tableClass,style:e.tableStyle,...it.value,scrollTarget:e.virtualScrollTarget,items:oe.value,type:"__qtable",tableColspan:I.value,onVirtualScroll:ze},D)}const w=[gt()];return l!==null&&w.unshift(l()),kl({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},w)}function ge(l,w){if(a.value!==null){a.value.scrollTo(l,w);return}l=parseInt(l,10);const F=q.value.querySelector(`tbody tr:nth-of-type(${l+1})`);if(F!==null){const T=q.value.querySelector(".q-table__middle.scroll"),D=F.offsetTop-e.virtualScrollStickySizeStart,le=D<T.scrollTop?"decrease":"increase";T.scrollTop=D,n("virtualScroll",{index:l,from:0,to:M.value.rowsPerPage-1,direction:le})}}function ze(l){n("virtualScroll",l)}function Qe(){return[c(_t,{class:"q-table__linear-progress",color:e.color,dark:u.value,indeterminate:!0,trackColor:"transparent"})]}function mt(l,w,F){const T=f.value(l),D=y(T);if(w!==void 0){const te={key:T,row:l,pageIndex:F,__trClass:D?"selected":""};if(e.tableRowStyleFn!==void 0&&(te.__trStyle=e.tableRowStyleFn(l)),e.tableRowClassFn!==void 0){const Me=e.tableRowClassFn(l);Me&&(te.__trClass=`${Me} ${te.__trClass}`)}return w(Ye(te))}const le=o["body-cell"],ee=i.value.map(te=>{const Me=o[`body-cell-${te.name}`],Je=Me!==void 0?Me:le;return Je!==void 0?Je(xt({key:T,row:l,pageIndex:F,col:te})):c("td",{class:te.__tdClass(l),style:te.__tdStyle(l)},we(te,l))});if(de.value===!0){const te=o["body-selection"],Me=te!==void 0?te(bt({key:T,row:l,pageIndex:F})):[c(Mt,{modelValue:D,color:e.color,dark:u.value,dense:e.dense,"onUpdate:modelValue":(Je,pt)=>{Q([T],[l],Je,pt)}})];ee.unshift(c("td",{class:"q-table--col-auto-width"},Me))}const _e={key:T,class:{selected:D}};if(e.onRowClick!==void 0&&(_e.class["cursor-pointer"]=!0,_e.onClick=te=>{n("rowClick",te,l,F)}),e.onRowDblclick!==void 0&&(_e.class["cursor-pointer"]=!0,_e.onDblclick=te=>{n("rowDblclick",te,l,F)}),e.onRowContextmenu!==void 0&&(_e.class["cursor-pointer"]=!0,_e.onContextmenu=te=>{n("rowContextmenu",te,l,F)}),e.tableRowStyleFn!==void 0&&(_e.style=e.tableRowStyleFn(l)),e.tableRowClassFn!==void 0){const te=e.tableRowClassFn(l);te&&(_e.class[te]=!0)}return c("tr",_e,ee)}function gt(){const l=o.body,w=o["top-row"],F=o["bottom-row"];let T=oe.value.map((D,le)=>mt(D,l,le));return w!==void 0&&(T=w({cols:i.value}).concat(T)),F!==void 0&&(T=T.concat(F({cols:i.value}))),c("tbody",T)}function Ye(l){return pe(l),l.cols=l.cols.map(w=>ct({...w},"value",()=>we(w,l.row))),l}function xt(l){return pe(l),ct(l,"value",()=>we(l.col,l.row)),l}function bt(l){return pe(l),l}function pe(l){Object.assign(l,{cols:i.value,colsMap:h.value,sort:z,rowIndex:E.value+l.pageIndex,color:e.color,dark:u.value,dense:e.dense}),de.value===!0&&ct(l,"selected",()=>y(l.key),(w,F)=>{Q([l.key],[l.row],w,F)}),ct(l,"expand",()=>Z(l.key),w=>{ue(l.key,w)})}function we(l,w){const F=typeof l.field=="function"?l.field(w):w[l.field];return l.format!==void 0?l.format(F,w):F}const Re=g(()=>({pagination:p.value,pagesNumber:me.value,isFirstPage:S.value,isLastPage:ne.value,firstPage:Ie,prevPage:Pe,nextPage:Ve,lastPage:De,inFullscreen:m.value,toggleFullscreen:r}));function kt(){const l=o.top,w=o["top-left"],F=o["top-right"],T=o["top-selection"],D=de.value===!0&&T!==void 0&&v.value>0,le="q-table__top relative-position row items-center";if(l!==void 0)return c("div",{class:le},[l(Re.value)]);let ee;if(D===!0?ee=T(Re.value).slice():(ee=[],w!==void 0?ee.push(c("div",{class:"q-table__control"},[w(Re.value)])):e.title&&ee.push(c("div",{class:"q-table__control"},[c("div",{class:["q-table__title",e.titleClass]},e.title)]))),F!==void 0&&(ee.push(c("div",{class:"q-table__separator col"})),ee.push(c("div",{class:"q-table__control"},[F(Re.value)]))),ee.length!==0)return c("div",{class:le},ee)}const Ge=g(()=>V.value===!0?null:qe.value);function ut(){const l=St();return e.loading===!0&&o.loading===void 0&&l.push(c("tr",{class:"q-table__progress"},[c("th",{class:"relative-position",colspan:I.value},Qe())])),c("thead",l)}function St(){const l=o.header,w=o["header-cell"];if(l!==void 0)return l(Ze({header:!0})).slice();const F=i.value.map(T=>{const D=o[`header-cell-${T.name}`],le=D!==void 0?D:w,ee=Ze({col:T});return le!==void 0?le(ee):c(Ra,{key:T.name,props:ee},()=>T.label)});if(re.value===!0&&e.grid!==!0)F.unshift(c("th",{class:"q-table--col-auto-width"}," "));else if(Se.value===!0){const T=o["header-selection"],D=T!==void 0?T(Ze({})):[c(Mt,{color:e.color,modelValue:Ge.value,dark:u.value,dense:e.dense,"onUpdate:modelValue":rt})];F.unshift(c("th",{class:"q-table--col-auto-width"},D))}return[c("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},F)]}function Ze(l){return Object.assign(l,{cols:i.value,sort:z,colsMap:h.value,color:e.color,dark:u.value,dense:e.dense}),Se.value===!0&&ct(l,"selected",()=>Ge.value,rt),l}function rt(l){V.value===!0&&(l=!1),Q(oe.value.map(f.value),oe.value,l)}const Ke=g(()=>{const l=[e.iconFirstPage||s.iconSet.table.firstPage,e.iconPrevPage||s.iconSet.table.prevPage,e.iconNextPage||s.iconSet.table.nextPage,e.iconLastPage||s.iconSet.table.lastPage];return s.lang.rtl===!0?l.reverse():l});function ht(){if(e.hideBottom===!0)return;if(Ne.value===!0){if(e.hideNoData===!0)return;const F=e.loading===!0?e.loadingLabel||s.lang.table.loading:e.filter?e.noResultsLabel||s.lang.table.noResults:e.noDataLabel||s.lang.table.noData,T=o["no-data"],D=T!==void 0?[T({message:F,icon:s.iconSet.table.warning,filter:e.filter})]:[c(jt,{class:"q-table__bottom-nodata-icon",name:s.iconSet.table.warning}),F];return c("div",{class:wt+" q-table__bottom--nodata"},D)}const l=o.bottom;if(l!==void 0)return c("div",{class:wt},[l(Re.value)]);const w=e.hideSelectedBanner!==!0&&de.value===!0&&v.value>0?[c("div",{class:"q-table__control"},[c("div",[(e.selectedRowsLabel||s.lang.table.selectedRecords)(v.value)])])]:[];if(e.hidePagination!==!0)return c("div",{class:wt+" justify-end"},Pt(w));if(w.length!==0)return c("div",{class:wt},w)}function qt(l){j({page:1,rowsPerPage:l.value})}function Pt(l){let w;const{rowsPerPage:F}=p.value,T=e.paginationLabel||s.lang.table.pagination,D=o.pagination,le=e.rowsPerPageOptions.length>1;if(l.push(c("div",{class:"q-table__separator col"})),le===!0&&l.push(c("div",{class:"q-table__control"},[c("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||s.lang.table.recordsPerPage]),c(Ha,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:F,options:Be.value,displayValue:F===0?s.lang.table.allRows:F,dark:u.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":qt})])),D!==void 0)w=D(Re.value);else if(w=[c("span",F!==0?{class:"q-table__bottom-item"}:{},[F?T(E.value+1,Math.min(X.value,he.value),he.value):T(1,be.value,he.value)])],F!==0&&me.value>1){const ee={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(ee.size="sm"),me.value>2&&w.push(c(ke,{key:"pgFirst",...ee,icon:Ke.value[0],disable:S.value,"aria-label":s.lang.pagination.first,onClick:Ie})),w.push(c(ke,{key:"pgPrev",...ee,icon:Ke.value[1],disable:S.value,"aria-label":s.lang.pagination.prev,onClick:Pe}),c(ke,{key:"pgNext",...ee,icon:Ke.value[2],disable:ne.value,"aria-label":s.lang.pagination.next,onClick:Ve})),me.value>2&&w.push(c(ke,{key:"pgLast",...ee,icon:Ke.value[3],disable:ne.value,"aria-label":s.lang.pagination.last,onClick:De}))}return l.push(c("div",{class:"q-table__control"},w)),l}function yt(){const l=e.gridHeader===!0?[c("table",{class:"q-table"},[ut()])]:e.loading===!0&&o.loading===void 0?Qe():void 0;return c("div",{class:"q-table__middle"},l)}function Vt(){const l=o.item!==void 0?o.item:w=>{const F=w.cols.map(D=>c("div",{class:"q-table__grid-item-row"},[c("div",{class:"q-table__grid-item-title"},[D.label]),c("div",{class:"q-table__grid-item-value"},[D.value])]));if(de.value===!0){const D=o["body-selection"],le=D!==void 0?D(w):[c(Mt,{modelValue:w.selected,color:e.color,dark:u.value,dense:e.dense,"onUpdate:modelValue":(ee,_e)=>{Q([w.key],[w.row],ee,_e)}})];F.unshift(c("div",{class:"q-table__grid-item-row"},le),c(Dt,{dark:u.value}))}const T={class:["q-table__grid-item-card"+k.value,e.cardClass],style:e.cardStyle};if(e.cardStyleFn!==void 0&&(T.style=[T.style,e.cardStyleFn(w.row)]),e.cardClassFn!==void 0){const D=e.cardClassFn(w.row);D&&(T.class[0]+=` ${D}`)}return(e.onRowClick!==void 0||e.onRowDblclick!==void 0||e.onRowContextmenu!==void 0)&&(T.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(T.onClick=D=>{n("RowClick",D,w.row,w.pageIndex)}),e.onRowDblclick!==void 0&&(T.onDblclick=D=>{n("RowDblclick",D,w.row,w.pageIndex)}),e.onRowContextmenu!==void 0&&(T.onContextmenu=D=>{n("rowContextmenu",D,w.row,w.pageIndex)})),c("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(w.selected===!0?" q-table__grid-item--selected":"")},[c("div",T,F)])};return c("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},oe.value.map((w,F)=>l(Ye({key:f.value(w),row:w,pageIndex:F}))))}return Object.assign(d.proxy,{requestServerInteraction:G,setPagination:j,firstPage:Ie,prevPage:Pe,nextPage:Ve,lastPage:De,isRowSelected:y,clearSelection:N,isRowExpanded:Z,setExpanded:U,sort:z,resetVirtualScroll:$e,scrollTo:ge,getCellValue:we}),$l(d.proxy,{filteredSortedRows:()=>ce.value,computedRows:()=>oe.value,computedRowsNumber:()=>he.value}),()=>{const l=[kt()],w={ref:q,class:A.value};return e.grid===!0?l.push(yt()):Object.assign(w,{class:[w.class,e.cardClass],style:e.cardStyle}),l.push(xe(),ht()),e.loading===!0&&o.loading!==void 0&&l.push(o.loading()),c("div",w,l)}}}),ro={class:"row q-col-gutter-md"},so={class:"col-12"},co={class:"col-12"},fo={class:"row q-gutter-sm"},vo={class:"col-12"},mo={class:"row q-col-gutter-md"},go={class:"col-md-3 col-sm-6"},bo={class:"text-h6"},So={class:"col-md-3 col-sm-6"},ho={class:"text-h6"},yo={class:"col-md-3 col-sm-6"},wo={class:"text-h6"},_o={class:"col-md-3 col-sm-6"},Co={class:"text-h6"},xo={class:"col-12"},ko={class:"row q-col-gutter-md"},qo={class:"col-md-4"},Po={class:"row items-center"},Vo={class:"col-6"},po={class:"text-caption"},Ro={class:"col-4"},Oo={class:"col-2 text-right"},To={class:"text-caption"},Fo={class:"col-md-4"},Ao={class:"row items-center"},Eo={class:"col-6"},Mo={class:"text-caption"},Bo={class:"col-4"},Io={class:"col-2 text-right"},Do={class:"text-caption"},zo={class:"col-md-4"},Lo={class:"row items-center"},Ho={class:"col-6"},jo={class:"text-caption"},No={class:"col-4"},$o={class:"col-2 text-right"},Qo={class:"text-caption"},Ko={class:"col-12"},Uo={class:"row items-center justify-between"},Wo={key:0,class:"text-caption"},Xo={key:1,class:"text-grey-5 text-caption"},Yo={class:"row q-col-gutter-md"},Go={class:"col-12"},Zo={class:"col-12"},Jo={class:"col-12"},en={class:"col-12"},tn={key:0,class:"text-body1"},ln={key:1,class:"text-grey-5"},an={class:"col-12"},on={class:"text-caption text-grey-7"},nn={class:"text-caption text-grey-7"},un={class:"text-h6"},Sn=Ql({__name:"SurveyResults",setup(e){const o=Xl(),n=Yl(),d=H(!1),s=H([]),u=H({total:0,satisfaction:{},recommendation:{},additionalEducation:{},averageFeedbackLength:0}),m=H(!1),r=H(null),f=H(!1),q=H([]),a=[{name:"pollId",label:"Poll ID",field:"pollId",align:"left"},{name:"question",label:"질문",field:"question",align:"left"},{name:"totalVotes",label:"응답 수",field:"totalVotes",align:"right"},{name:"actions",label:"그래프",field:"actions",align:"center"}],b=H(!1),k=H(""),O=V=>{k.value=V,b.value=!0},A=async()=>{try{f.value=!0;const V=tl?Kl(tl):null;if(!V){q.value=[];return}const y=(await Ul(Wl(V,"polls"))).val()||{},N=[];Object.keys(y).forEach(Q=>{const se=y[Q]?.meta||{},i=y[Q]?.votes||{},h=Object.keys(i).length;N.push({pollId:Q,question:se.question&&String(se.question)||Q,totalVotes:h})}),N.sort((Q,se)=>se.totalVotes-Q.totalVotes),q.value=N}catch(V){console.error("poll 목록 로드 실패:",V)}finally{f.value=!1}},M=[{name:"satisfaction",label:"만족도",field:"satisfaction",align:"left"},{name:"recommendation",label:"추천 의향",field:"recommendation",align:"left"},{name:"additionalEducation",label:"추가 교육 의향",field:"additionalEducation",align:"left"},{name:"feedback",label:"피드백",field:"feedback",align:"left"},{name:"submittedAt",label:"제출일",field:"submittedAt",align:"left"},{name:"actions",label:"상세보기",field:"actions",align:"center"}],p=g(()=>u.value.total||1),K=g(()=>{const V=u.value.satisfaction;if(!V||Object.keys(V).length===0)return 0;let v=0,y=0;return Object.entries(V).forEach(([N,Q])=>{const se=re(N);v+=se*Q,y+=Q}),y>0?Math.round(v/y*20):0}),G=g(()=>{const V=u.value.recommendation;if(!V||Object.keys(V).length===0)return 0;let v=0,y=0;return Object.entries(V).forEach(([N,Q])=>{const se=Se(N);v+=se*Q,y+=Q}),y>0?Math.round(v/y*20):0}),j=async()=>{d.value=!0;try{const V=await cl.getSurveyResults();V.success&&V.data?s.value=V.data:s.value=[{id:"demo-1",satisfaction:"satisfied",recommendation:"recommend",additionalEducation:"interested",feedback:"AI 활용에 대한 교육이 매우 유용했습니다.",submittedAt:new Date().toISOString()},{id:"demo-2",satisfaction:"very_satisfied",recommendation:"highly_recommend",additionalEducation:"very_interested",feedback:"목회 현장에서 바로 적용할 수 있는 내용이었습니다.",submittedAt:new Date(Date.now()-864e5).toISOString()}];const v=await cl.getSurveyStatistics();v.success&&v.statistics?u.value=v.statistics:u.value={total:2,satisfaction:{very_satisfied:1,satisfied:1},recommendation:{highly_recommend:1,recommend:1},additionalEducation:{very_interested:1,interested:1},averageFeedbackLength:45}}catch(V){console.error("설문 결과 로드 실패:",V),s.value=[{id:"demo-1",satisfaction:"satisfied",recommendation:"recommend",additionalEducation:"interested",feedback:"AI 활용에 대한 교육이 매우 유용했습니다.",submittedAt:new Date().toISOString()}],u.value={total:1,satisfaction:{satisfied:1},recommendation:{recommend:1},additionalEducation:{interested:1},averageFeedbackLength:45},o.notify({type:"warning",message:"API 연결에 실패하여 데모 데이터를 표시합니다.",position:"top"})}finally{d.value=!1}},B=V=>{r.value=V,m.value=!0},Z=V=>new Date(V).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),U=V=>{const v=ka.find(y=>y.value===String(V));return v?v.label:String(V)},ue=V=>{const v=qa.find(y=>y.value===String(V));return v?v.label:String(V)},ce=V=>{const v=Pa.find(y=>y.value===String(V));return v?v.label:String(V)},be=V=>({very_satisfied:"positive",satisfied:"positive",neutral:"warning",dissatisfied:"negative",very_dissatisfied:"negative"})[String(V)]||"grey",oe=V=>({highly_recommend:"positive",recommend:"positive",neutral:"warning",not_recommend:"negative",highly_not_recommend:"negative"})[String(V)]||"grey",de=V=>({very_interested:"positive",interested:"positive",neutral:"warning",not_interested:"negative",not_at_all_interested:"negative"})[String(V)]||"grey",re=V=>({very_satisfied:5,satisfied:4,neutral:3,dissatisfied:2,very_dissatisfied:1})[String(V)]||0,Se=V=>({highly_recommend:5,recommend:4,neutral:3,not_recommend:2,highly_not_recommend:1})[String(V)]||0;$t(()=>{j(),A()});const qe=()=>{window.history.length>1?n.back():n.push("/")};return(V,v)=>(Ce(),Ft(Va,{class:"q-pa-md"},{default:R(()=>[x("div",ro,[x("div",so,[v[4]||(v[4]=x("div",{class:"text-h4 q-mb-md"},"📊 설문 결과 관리",-1)),P(Dt,{class:"q-mb-lg"})]),x("div",co,[P(Ae,null,{default:R(()=>[P(ye,{class:"row items-center justify-between"},{default:R(()=>[v[5]||(v[5]=x("div",{class:"text-h6"},"🗳️ 실시간 투표 목록 (Realtime Database)",-1)),x("div",fo,[P(ke,{flat:"",round:"",dense:"",icon:"refresh",loading:f.value,onClick:A},null,8,["loading"]),P(ke,{unelevated:"",color:"red",icon:"close",label:"닫기",size:"sm",onClick:qe,class:"close-button-polls"})])]),_:1,__:[5]}),P(ye,null,{default:R(()=>[P(gl,{rows:q.value,columns:a,"row-key":"pollId",flat:"",bordered:"",loading:f.value,pagination:{rowsPerPage:10}},{"body-cell-pollId":R(y=>[P(Le,{props:y},{default:R(()=>[P(ke,{flat:"",color:"primary",onClick:N=>O(y.row.pollId)},{default:R(()=>[Te(ae(y.row.pollId),1)]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),"body-cell-actions":R(y=>[P(Le,{props:y},{default:R(()=>[P(ke,{flat:"",round:"",size:"sm",icon:"insights",color:"secondary",onClick:N=>O(y.row.pollId)},{default:R(()=>[P(sl,null,{default:R(()=>v[6]||(v[6]=[Te("결과 그래프",-1)])),_:1,__:[6]})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"])]),_:1})]),_:1})]),x("div",vo,[x("div",mo,[x("div",go,[P(Ae,{class:"bg-primary text-white"},{default:R(()=>[P(ye,null,{default:R(()=>[x("div",bo,ae(u.value.total||0),1),v[7]||(v[7]=x("div",{class:"text-subtitle2"},"총 설문 수",-1))]),_:1,__:[7]})]),_:1})]),x("div",So,[P(Ae,{class:"bg-positive text-white"},{default:R(()=>[P(ye,null,{default:R(()=>[x("div",ho,ae(K.value)+"%",1),v[8]||(v[8]=x("div",{class:"text-subtitle2"},"평균 만족도",-1))]),_:1,__:[8]})]),_:1})]),x("div",yo,[P(Ae,{class:"bg-info text-white"},{default:R(()=>[P(ye,null,{default:R(()=>[x("div",wo,ae(G.value)+"%",1),v[9]||(v[9]=x("div",{class:"text-subtitle2"},"평균 추천도",-1))]),_:1,__:[9]})]),_:1})]),x("div",_o,[P(Ae,{class:"bg-warning text-white"},{default:R(()=>[P(ye,null,{default:R(()=>[x("div",Co,ae(u.value.averageFeedbackLength||0),1),v[10]||(v[10]=x("div",{class:"text-subtitle2"},"평균 피드백 길이",-1))]),_:1,__:[10]})]),_:1})])])]),x("div",xo,[P(Ae,null,{default:R(()=>[P(ye,null,{default:R(()=>v[11]||(v[11]=[x("div",{class:"text-h6"},"📈 설문 통계",-1)])),_:1,__:[11]}),P(ye,null,{default:R(()=>[x("div",ko,[x("div",qo,[v[12]||(v[12]=x("h6",{class:"q-mb-md"},"강의 만족도",-1)),(Ce(!0),Fe(At,null,Et(u.value.satisfaction,(y,N)=>(Ce(),Fe("div",{key:N,class:"q-mb-sm"},[x("div",Po,[x("div",Vo,[x("span",po,ae(U(N)),1)]),x("div",Ro,[P(_t,{value:y/p.value,color:"primary",class:"q-mr-sm"},null,8,["value"])]),x("div",Oo,[x("span",To,ae(y),1)])])]))),128))]),x("div",Fo,[v[13]||(v[13]=x("h6",{class:"q-mb-md"},"추천 의향",-1)),(Ce(!0),Fe(At,null,Et(u.value.recommendation,(y,N)=>(Ce(),Fe("div",{key:N,class:"q-mb-sm"},[x("div",Ao,[x("div",Eo,[x("span",Mo,ae(ue(N)),1)]),x("div",Bo,[P(_t,{value:y/p.value,color:"positive",class:"q-mr-sm"},null,8,["value"])]),x("div",Io,[x("span",Do,ae(y),1)])])]))),128))]),x("div",zo,[v[14]||(v[14]=x("h6",{class:"q-mb-md"},"추가 교육 의향",-1)),(Ce(!0),Fe(At,null,Et(u.value.additionalEducation,(y,N)=>(Ce(),Fe("div",{key:N,class:"q-mb-sm"},[x("div",Lo,[x("div",Ho,[x("span",jo,ae(ce(N)),1)]),x("div",No,[P(_t,{value:y/p.value,color:"info",class:"q-mr-sm"},null,8,["value"])]),x("div",$o,[x("span",Qo,ae(y),1)])])]))),128))])])]),_:1})]),_:1})]),x("div",Ko,[P(Ae,null,{default:R(()=>[P(ye,null,{default:R(()=>[x("div",Uo,[v[15]||(v[15]=x("div",{class:"text-h6"},"📋 설문 결과 목록",-1)),P(ke,{icon:"refresh",label:"새로고침",color:"primary",onClick:j,loading:d.value},null,8,["loading"])])]),_:1}),P(ye,null,{default:R(()=>[P(gl,{rows:s.value,columns:M,"row-key":"id",loading:d.value,pagination:{rowsPerPage:10},flat:"",bordered:""},{"body-cell-satisfaction":R(y=>[P(Le,{props:y},{default:R(()=>[P(Xe,{color:be(y.value),"text-color":"white",size:"sm"},{default:R(()=>[Te(ae(U(y.value)),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-recommendation":R(y=>[P(Le,{props:y},{default:R(()=>[P(Xe,{color:oe(y.value),"text-color":"white",size:"sm"},{default:R(()=>[Te(ae(ue(y.value)),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-additionalEducation":R(y=>[P(Le,{props:y},{default:R(()=>[P(Xe,{color:de(y.value),"text-color":"white",size:"sm"},{default:R(()=>[Te(ae(ce(y.value)),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-feedback":R(y=>[P(Le,{props:y},{default:R(()=>[y.value?(Ce(),Fe("div",Wo,ae(y.value.length>50?y.value.substring(0,50)+"...":y.value),1)):(Ce(),Fe("div",Xo,"-"))]),_:2},1032,["props"])]),"body-cell-submittedAt":R(y=>[P(Le,{props:y},{default:R(()=>[Te(ae(Z(y.value)),1)]),_:2},1032,["props"])]),"body-cell-actions":R(y=>[P(Le,{props:y},{default:R(()=>[P(ke,{flat:"",round:"",size:"sm",icon:"visibility",color:"primary",onClick:N=>B(y.row)},{default:R(()=>[P(sl,null,{default:R(()=>v[16]||(v[16]=[Te("상세보기",-1)])),_:1,__:[16]})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"])]),_:1})]),_:1})])]),P(Lt,{modelValue:m.value,"onUpdate:modelValue":v[1]||(v[1]=y=>m.value=y),maximized:""},{default:R(()=>[P(Ae,null,{default:R(()=>[P(ye,{class:"bg-primary text-white"},{default:R(()=>v[17]||(v[17]=[x("div",{class:"text-h6"},"📋 설문 상세보기",-1)])),_:1,__:[17]}),r.value?(Ce(),Ft(ye,{key:0},{default:R(()=>[x("div",Yo,[x("div",Go,[v[18]||(v[18]=x("h6",null,"1. 강의 만족도",-1)),P(Xe,{color:be(r.value.satisfaction),"text-color":"white",size:"md"},{default:R(()=>[Te(ae(U(r.value.satisfaction)),1)]),_:1},8,["color"])]),x("div",Zo,[v[19]||(v[19]=x("h6",null,"2. 지인 추천 의향",-1)),P(Xe,{color:oe(r.value.recommendation),"text-color":"white",size:"md"},{default:R(()=>[Te(ae(ue(r.value.recommendation)),1)]),_:1},8,["color"])]),x("div",Jo,[v[20]||(v[20]=x("h6",null,"3. 추가 교육 의향",-1)),P(Xe,{color:de(r.value.additionalEducation),"text-color":"white",size:"md"},{default:R(()=>[Te(ae(ce(r.value.additionalEducation)),1)]),_:1},8,["color"])]),x("div",en,[v[21]||(v[21]=x("h6",null,"4. 자유 의견",-1)),P(Ae,{flat:"",bordered:"",class:"q-pa-md"},{default:R(()=>[r.value.feedback?(Ce(),Fe("div",tn,ae(r.value.feedback),1)):(Ce(),Fe("div",ln,"의견이 없습니다."))]),_:1})]),x("div",an,[v[22]||(v[22]=x("h6",null,"제출 정보",-1)),x("div",on," 제출일: "+ae(Z(r.value.submittedAt)),1),x("div",nn,"설문 ID: "+ae(r.value.id),1)])])]),_:1})):ll("",!0),P(ya,{align:"right"},{default:R(()=>[P(ke,{flat:"",label:"닫기",onClick:v[0]||(v[0]=y=>m.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"]),P(Lt,{modelValue:b.value,"onUpdate:modelValue":v[3]||(v[3]=y=>b.value=y),maximized:""},{default:R(()=>[P(Ae,null,{default:R(()=>[P(ye,{class:"row items-center justify-between"},{default:R(()=>[x("div",un,"🗳️ 투표 결과: "+ae(k.value),1),P(ke,{flat:"",round:"",dense:"",icon:"close",onClick:v[2]||(v[2]=y=>b.value=!1)})]),_:1}),P(Dt),P(ye,null,{default:R(()=>[k.value?(Ce(),Ft(pa,{key:0,"poll-id":k.value},null,8,["poll-id"])):ll("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{Sn as default};
