const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D1vT6N3s.js","assets/index-C_LQcHkP.css"])))=>i.map(i=>d[i]);
import{bB as gt,bE as B,bF as N,dn as le,dp as me,dq as je,dr as ft,ds as xe,bO as pt,bR as yt,cs as Ee,bH as ie,cD as pe,bJ as St,bI as wt,bP as be,cp as kt,dt as re,du as Ue,dv as bt,dw as Ut,dx as Ct,dy as $t,dz as It,dA as Lt,dB as Vt,Y as xt,_ as At,cC as Ft}from"./index-D1vT6N3s.js";import{U as Mt,Y as Et,K as Tt,Z as Ot,C as Te,N as Dt,J as Rt,G as jt,r as Nt}from"./QDialog-Dn9VjDcM-Dk_wZ3Rn.js";import{S as Pt}from"./pinia-CUn_f_AT-BAm4BR34.js";const Ne=(l,u=Ne,M=u.f||(u.f=["assets/index-Bw1AfG2u.js","assets/index-B0WZdqPn.css"]))=>l.map(b=>M[b]),Oe={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},$e={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:l=>l.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:l=>l.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:l=>l.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:l=>l.toLocaleLowerCase()}},Pe=Object.keys($e);Pe.forEach(l=>{$e[l].regex=new RegExp($e[l].pattern)});const Gt=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+Pe.join("")+"])|(.)","g"),De=/[.*+?^${}()|[\]\\]/g,j="",Bt={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function _t(l,u,M,b){let g,y,R,_,I,k;const p=B(null),o=B(W());function z(){return l.autogrow===!0||["textarea","text","search","url","tel","password"].includes(l.type)}ie(()=>l.type+l.autogrow,ee),ie(()=>l.mask,d=>{if(d!==void 0)K(o.value,!0);else{const i=H(o.value);ee(),l.modelValue!==i&&u("update:modelValue",i)}}),ie(()=>l.fillMask+l.reverseFillMask,()=>{p.value===!0&&K(o.value,!0)}),ie(()=>l.unmaskedValue,()=>{p.value===!0&&K(o.value)});function W(){if(ee(),p.value===!0){const d=de(H(l.modelValue));return l.fillMask!==!1?ge(d):d}return l.modelValue}function ne(d){if(d<g.length)return g.slice(-d);let i="",v=g;const n=v.indexOf(j);if(n!==-1){for(let S=d-v.length;S>0;S--)i+=j;v=v.slice(0,n)+i+v.slice(n)}return v}function ee(){if(p.value=l.mask!==void 0&&l.mask.length!==0&&z(),p.value===!1){_=void 0,g="",y="";return}const d=Oe[l.mask]===void 0?l.mask:Oe[l.mask],i=typeof l.fillMask=="string"&&l.fillMask.length!==0?l.fillMask.slice(0,1):"_",v=i.replace(De,"\\$&"),n=[],S=[],w=[];let T=l.reverseFillMask===!0,U="",$="";d.replace(Gt,(O,r,A,te,Y)=>{if(te!==void 0){const P=$e[te];w.push(P),$=P.negate,T===!0&&(S.push("(?:"+$+"+)?("+P.pattern+"+)?(?:"+$+"+)?("+P.pattern+"+)?"),T=!1),S.push("(?:"+$+"+)?("+P.pattern+")?")}else if(A!==void 0)U="\\"+(A==="\\"?"":A),w.push(A),n.push("([^"+U+"]+)?"+U+"?");else{const P=r!==void 0?r:Y;U=P==="\\"?"\\\\\\\\":P.replace(De,"\\\\$&"),w.push(P),n.push("([^"+U+"]+)?"+U+"?")}});const ce=new RegExp("^"+n.join("")+"("+(U===""?".":"[^"+U+"]")+"+)?"+(U===""?"":"["+U+"]*")+"$"),oe=S.length-1,L=S.map((O,r)=>r===0&&l.reverseFillMask===!0?new RegExp("^"+v+"*"+O):r===oe?new RegExp("^"+O+"("+($===""?".":$)+"+)?"+(l.reverseFillMask===!0?"$":v+"*")):new RegExp("^"+O));R=w,_=O=>{const r=ce.exec(l.reverseFillMask===!0?O:O.slice(0,w.length+1));r!==null&&(O=r.slice(1).join(""));const A=[],te=L.length;for(let Y=0,P=O;Y<te;Y++){const ue=L[Y].exec(P);if(ue===null)break;P=P.slice(ue.shift().length),A.push(...ue)}return A.length!==0?A.join(""):O},g=w.map(O=>typeof O=="string"?O:j).join(""),y=g.split(j).join(i)}function K(d,i,v){const n=b.value,S=n.selectionEnd,w=n.value.length-S,T=H(d);i===!0&&ee();const U=de(T),$=l.fillMask!==!1?ge(U):U,ce=o.value!==$;n.value!==$&&(n.value=$),ce===!0&&(o.value=$),document.activeElement===n&&pe(()=>{if($===y){const L=l.reverseFillMask===!0?y.length:0;n.setSelectionRange(L,L,"forward");return}if(v==="insertFromPaste"&&l.reverseFillMask!==!0){const L=n.selectionEnd;let O=S-1;for(let r=I;r<=O&&r<L;r++)g[r]!==j&&O++;J.right(n,O);return}if(["deleteContentBackward","deleteContentForward"].indexOf(v)!==-1){const L=l.reverseFillMask===!0?S===0?$.length>U.length?1:0:Math.max(0,$.length-($===y?0:Math.min(U.length,w)+1))+1:S;n.setSelectionRange(L,L,"forward");return}if(l.reverseFillMask===!0)if(ce===!0){const L=Math.max(0,$.length-($===y?0:Math.min(U.length,w+1)));L===1&&S===1?n.setSelectionRange(L,L,"forward"):J.rightReverse(n,L)}else{const L=$.length-w;n.setSelectionRange(L,L,"backward")}else if(ce===!0){const L=Math.max(0,g.indexOf(j),Math.min(U.length,S)-1);J.right(n,L)}else{const L=S-1;J.right(n,L)}});const oe=l.unmaskedValue===!0?H($):$;String(l.modelValue)!==oe&&(l.modelValue!==null||oe!=="")&&M(oe,!0)}function ve(d,i,v){const n=de(H(d.value));i=Math.max(0,g.indexOf(j),Math.min(n.length,i)),I=i,d.setSelectionRange(i,v,"forward")}const J={left(d,i){const v=g.slice(i-1).indexOf(j)===-1;let n=Math.max(0,i-1);for(;n>=0;n--)if(g[n]===j){i=n,v===!0&&i++;break}if(n<0&&g[i]!==void 0&&g[i]!==j)return J.right(d,0);i>=0&&d.setSelectionRange(i,i,"backward")},right(d,i){const v=d.value.length;let n=Math.min(v,i+1);for(;n<=v;n++)if(g[n]===j){i=n;break}else g[n-1]===j&&(i=n);if(n>v&&g[i-1]!==void 0&&g[i-1]!==j)return J.left(d,v);d.setSelectionRange(i,i,"forward")},leftReverse(d,i){const v=ne(d.value.length);let n=Math.max(0,i-1);for(;n>=0;n--)if(v[n-1]===j){i=n;break}else if(v[n]===j&&(i=n,n===0))break;if(n<0&&v[i]!==void 0&&v[i]!==j)return J.rightReverse(d,0);i>=0&&d.setSelectionRange(i,i,"backward")},rightReverse(d,i){const v=d.value.length,n=ne(v),S=n.slice(0,i+1).indexOf(j)===-1;let w=Math.min(v,i+1);for(;w<=v;w++)if(n[w-1]===j){i=w,i>0&&S===!0&&i--;break}if(w>v&&n[i-1]!==void 0&&n[i-1]!==j)return J.leftReverse(d,v);d.setSelectionRange(i,i,"forward")}};function ye(d){u("click",d),k=void 0}function he(d){if(u("keydown",d),Ft(d)===!0||d.altKey===!0)return;const i=b.value,v=i.selectionStart,n=i.selectionEnd;if(d.shiftKey||(k=void 0),d.keyCode===37||d.keyCode===39){d.shiftKey&&k===void 0&&(k=i.selectionDirection==="forward"?v:n);const S=J[(d.keyCode===39?"right":"left")+(l.reverseFillMask===!0?"Reverse":"")];if(d.preventDefault(),S(i,k===v?n:v),d.shiftKey){const w=i.selectionStart;i.setSelectionRange(Math.min(k,w),Math.max(k,w),"forward")}}else d.keyCode===8&&l.reverseFillMask!==!0&&v===n?(J.left(i,v),i.setSelectionRange(i.selectionStart,n,"backward")):d.keyCode===46&&l.reverseFillMask===!0&&v===n&&(J.rightReverse(i,n),i.setSelectionRange(v,i.selectionEnd,"forward"))}function de(d){if(d==null||d==="")return"";if(l.reverseFillMask===!0)return se(d);const i=R;let v=0,n="";for(let S=0;S<i.length;S++){const w=d[v],T=i[S];if(typeof T=="string")n+=T;else if(w!==void 0&&T.regex.test(w))n+=T.transform!==void 0?T.transform(w):w,v++;else return n}return n}function se(d){const i=R,v=g.indexOf(j);let n=d.length-1,S="";for(let w=i.length-1;w>=0&&n!==-1;w--){const T=i[w];let U=d[n];if(typeof T=="string")S=T+S;else if(U!==void 0&&T.regex.test(U))do S=(T.transform!==void 0?T.transform(U):U)+S,n--,U=d[n];while(v===w&&U!==void 0&&T.regex.test(U));else return S}return S}function H(d){return typeof d!="string"||_===void 0?typeof d=="number"?_(""+d):d:_(d)}function ge(d){return y.length-d.length<=0?d:l.reverseFillMask===!0&&d.length!==0?y.slice(0,-d.length)+d:d+y.slice(d.length)}return{innerValue:o,hasMask:p,moveCursorForPaste:ve,updateMaskValue:K,onMaskedKeydown:he,onMaskedClick:ye}}function zt(l,u){function M(){const b=l.modelValue;try{const g="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(b)===b&&("length"in b?Array.from(b):[b]).forEach(y=>{g.items.add(y)}),{files:g.files}}catch{return{files:void 0}}}return u===!0?N(()=>{if(l.type==="file")return M()}):N(M)}const Ht=pt({name:"QInput",inheritAttrs:!1,props:{...Tt,...Bt,...Et,modelValue:[String,Number,FileList],shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Mt,"paste","change","keydown","click","animationend"],setup(l,{emit:u,attrs:M}){const{proxy:b}=yt(),{$q:g}=b,y={};let R=NaN,_,I,k=null,p;const o=B(null),z=Ot(l),{innerValue:W,hasMask:ne,moveCursorForPaste:ee,updateMaskValue:K,onMaskedKeydown:ve,onMaskedClick:J}=_t(l,u,U,o),ye=zt(l,!0),he=N(()=>Te(W.value)),de=Rt(w),se=Dt({changeEvent:!0}),H=N(()=>l.type==="textarea"||l.autogrow===!0),ge=N(()=>H.value===!0||["text","search","url","tel","password"].includes(l.type)),d=N(()=>{const r={...se.splitAttrs.listeners.value,onInput:w,onPaste:S,onChange:ce,onBlur:oe,onFocus:Ee};return r.onCompositionstart=r.onCompositionupdate=r.onCompositionend=de,ne.value===!0&&(r.onKeydown=ve,r.onClick=J),l.autogrow===!0&&(r.onAnimationend=T),r}),i=N(()=>{const r={tabindex:0,"data-autofocus":l.autofocus===!0||void 0,rows:l.type==="textarea"?6:void 0,"aria-label":l.label,name:z.value,...se.splitAttrs.attributes.value,id:se.targetUid.value,maxlength:l.maxlength,disabled:l.disable===!0,readonly:l.readonly===!0};return H.value===!1&&(r.type=l.type),l.autogrow===!0&&(r.rows=1),r});ie(()=>l.type,()=>{o.value&&(o.value.value=l.modelValue)}),ie(()=>l.modelValue,r=>{if(ne.value===!0){if(I===!0&&(I=!1,String(r)===R))return;K(r)}else W.value!==r&&(W.value=r,l.type==="number"&&y.hasOwnProperty("value")===!0&&(_===!0?_=!1:delete y.value));l.autogrow===!0&&pe($)}),ie(()=>l.autogrow,r=>{r===!0?pe($):o.value!==null&&M.rows>0&&(o.value.style.height="auto")}),ie(()=>l.dense,()=>{l.autogrow===!0&&pe($)});function v(){Nt(()=>{const r=document.activeElement;o.value!==null&&o.value!==r&&(r===null||r.id!==se.targetUid.value)&&o.value.focus({preventScroll:!0})})}function n(){o.value?.select()}function S(r){if(ne.value===!0&&l.reverseFillMask!==!0){const A=r.target;ee(A,A.selectionStart,A.selectionEnd)}u("paste",r)}function w(r){if(!r||!r.target)return;if(l.type==="file"){u("update:modelValue",r.target.files);return}const A=r.target.value;if(r.target.qComposing===!0){y.value=A;return}if(ne.value===!0)K(A,!1,r.inputType);else if(U(A),ge.value===!0&&r.target===document.activeElement){const{selectionStart:te,selectionEnd:Y}=r.target;te!==void 0&&Y!==void 0&&pe(()=>{r.target===document.activeElement&&A.indexOf(r.target.value)===0&&r.target.setSelectionRange(te,Y)})}l.autogrow===!0&&$()}function T(r){u("animationend",r),$()}function U(r,A){p=()=>{k=null,l.type!=="number"&&y.hasOwnProperty("value")===!0&&delete y.value,l.modelValue!==r&&R!==r&&(R=r,A===!0&&(I=!0),u("update:modelValue",r),pe(()=>{R===r&&(R=NaN)})),p=void 0},l.type==="number"&&(_=!0,y.value=r),l.debounce!==void 0?(k!==null&&clearTimeout(k),y.value=r,k=setTimeout(p,l.debounce)):p()}function $(){requestAnimationFrame(()=>{const r=o.value;if(r!==null){const A=r.parentNode.style,{scrollTop:te}=r,{overflowY:Y,maxHeight:P}=g.platform.is.firefox===!0?{}:window.getComputedStyle(r),ue=Y!==void 0&&Y!=="scroll";ue===!0&&(r.style.overflowY="hidden"),A.marginBottom=r.scrollHeight-1+"px",r.style.height="1px",r.style.height=r.scrollHeight+"px",ue===!0&&(r.style.overflowY=parseInt(P,10)<r.scrollHeight?"auto":"hidden"),A.marginBottom="",r.scrollTop=te}})}function ce(r){de(r),k!==null&&(clearTimeout(k),k=null),p?.(),u("change",r.target.value)}function oe(r){r!==void 0&&Ee(r),k!==null&&(clearTimeout(k),k=null),p?.(),_=!1,I=!1,delete y.value,l.type!=="file"&&setTimeout(()=>{o.value!==null&&(o.value.value=W.value!==void 0?W.value:"")})}function L(){return y.hasOwnProperty("value")===!0?y.value:W.value!==void 0?W.value:""}St(()=>{oe()}),wt(()=>{l.autogrow===!0&&$()}),Object.assign(se,{innerValue:W,fieldClass:N(()=>`q-${H.value===!0?"textarea":"input"}`+(l.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:N(()=>l.type!=="file"&&typeof l.shadowText=="string"&&l.shadowText.length!==0),inputRef:o,emitValue:U,hasValue:he,floatingLabel:N(()=>he.value===!0&&(l.type!=="number"||isNaN(W.value)===!1)||Te(l.displayValue)),getControl:()=>be(H.value===!0?"textarea":"input",{ref:o,class:["q-field__native q-placeholder",l.inputClass],style:l.inputStyle,...i.value,...d.value,...l.type!=="file"?{value:L()}:ye.value}),getShadowControl:()=>be("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(H.value===!0?"":" text-no-wrap")},[be("span",{class:"invisible"},L()),be("span",l.shadowText)])});const O=jt(se);return Object.assign(b,{focus:v,select:n,getNativeElement:()=>o.value}),kt(b,"nativeEl",()=>o.value),O}}),Re=()=>(localStorage.getItem("enableStudentMode"),!0),Q={log:(...l)=>{Re()},warn:(...l)=>{Re()},error:(...l)=>{console.error(...l)}},Yt=Pt("course",()=>{const l=B(0),u=B(0),M=B("ai-workshop"),b=B(!1),g=B(!0),y=B(!1),R=B(!1),_=B(15),I=B(""),k=B(""),p=B(!0),o=B([]),z=async()=>{try{try{const c=await fetch("/slides/toc-cache-invalidation.json");if(c.ok){const h=await c.json();Q.log(`🔄 캐시 무효화 감지: ${h.lastBuild}`)}}catch(c){Q.warn("⚠️ 캐시 무효화 파일 확인 실패:",c)}let e=null;try{const c=await fetch("/slides/sidebar-data.json");if(c.ok&&(e=await c.json(),Q.log("✅ 통합 사이드바 데이터 로드 완료:",e.slides.length,"개 슬라이드,",Object.keys(e.chapters).length,"개 챕터"),e.chapters&&Object.keys(e.chapters).length>0)){const h=[],f=Object.keys(e.chapters).map(Number).sort((V,E)=>V-E);for(const V of f){const E=e.chapters[V.toString()];if(!E||!E.slides)continue;const x=[],C=[];for(let F=0;F<E.slides.length;F++){const q=E.slides[F],D=q.title||`슬라이드 ${q.slide}`;x.push(D),C.push({title:D,videoUrl:q.videoUrl||null,hasVideo:!!q.videoUrl})}const X={title:E.title||`Chapter ${V}`,slides:x.length,slideData:C,completed:!1,videoUrl:null,slideTitles:x,locked:!1};h.push(X)}return Q.log("✅ 사이드바 데이터로부터 Lesson 배열 생성 완료:",h.length,"개 챕터"),h}}catch(c){Q.warn("⚠️ 통합 사이드바 데이터 로드 실패:",c)}let t=[];try{const c=await fetch("/slides/files.json");if(c.ok)t=(await c.json()).files||[],Q.log("✅ 파일 목록 로드 완료:",t.length,"개 파일");else throw new Error("files.json을 읽을 수 없습니다")}catch(c){Q.warn("❌ JSON 파일 로드 실패, 하드코딩된 목록 사용:",c),t=["slide-0-0.md","slide-0-1.md","slide-0-2.md","slide-0-3.md","slide-0-4.md","slide-0-5.md","slide-0-6.md","slide-1-0.md","slide-1-1.md","slide-1-2.md","slide-1-3.md","slide-1-4.md","slide-1-5.md","slide-1-6.md","slide-1-7.md","slide-1-8.md","slide-1-9.md","slide-1-10.md","slide-1-11.md","slide-1-12.md","slide-1-13.md","slide-1-14.md","slide-2-0.md","slide-2-1.md","slide-2-2.md","slide-2-3.md","slide-2-4.md","slide-2-5.md","slide-2-6.md","slide-2-7.md","slide-2-8.md","slide-2-9.md","slide-2-10.md","slide-2-11.md","slide-2-12.md","slide-2-13.md","slide-3-0.md","slide-3-1.md","slide-3-2.md","slide-3-3.md","slide-3-4.md","slide-3-5.md","slide-3-6.md","slide-3-7.md","slide-3-8.md","slide-4-0.md","slide-4-1.md","slide-4-2.md","slide-4-3.md","slide-5-0.md","slide-5-1.md","slide-6-0.md","slide-6-1.md","slide-6-2.md","slide-6-3.md","slide-6-4.md","slide-6-5.md","slide-6-6.md","slide-6-7.md","slide-7-0.md","slide-7-1.md","slide-7-2.md","slide-7-3.md","slide-7-4.md","slide-7-5.md","slide-7-6.md","slide-7-7.md","slide-7-8.md","slide-7-9.md","slide-7-10.md","slide-7-11.md","slide-7-12.md","slide-7-13.md","slide-7-14.md","slide-7-15.md","slide-8-0.md","slide-8-1.md","slide-8-2.md","slide-8-3.md","slide-8-4.md","slide-8-5.md","slide-8-6.md"]}const s={};t.forEach(c=>{const h=c.match(/slide-(\d+)-(\d+)\.md/);if(h&&h[1]&&h[2]){const f=parseInt(h[1]),V=parseInt(h[2]);s[f]||(s[f]=[]),s[f].push(c)}});const a=Object.keys(s).map(Number).sort((c,h)=>c-h),m=[];for(const c of a){const h=s[c]?.sort((x,C)=>{const X=parseInt(x.match(/slide-\d+-(\d+)\.md/)?.[1]||"0"),F=parseInt(C.match(/slide-\d+-(\d+)\.md/)?.[1]||"0");return X-F})||[];let f=`${c}. Chapter ${c}`;try{const x=await r(`${c}-0`);let C="";const X=x.match(/<h[1-3][^>]*>([^<]+)<\/h[1-3]>/);if(X&&X[1]&&(C=X[1].trim().replace(/^#+\s*/,""),console.log(`📝 Chapter 제목 추출 (HTML): ${C}`)),!C){const F=x.match(/^###\s*(.+)$/m);F&&F[1]&&(C=F[1].trim(),console.log(`📝 Chapter 제목 추출 (###): ${C}`))}if(!C){const F=x.match(/^##\s*(.+)$/m);F&&F[1]&&(C=F[1].trim(),console.log(`📝 Chapter 제목 추출 (##): ${C}`))}if(!C){const F=x.match(/^#\s*(.+)$/m);F&&F[1]&&(C=F[1].trim(),console.log(`📝 Chapter 제목 추출 (#): ${C}`))}C.length>0&&(f=`${c}. ${C}`,console.log(`📝 Chapter ${c} 제목 설정: ${f}`))}catch(x){console.warn(`Chapter ${c} 제목을 가져올 수 없습니다:`,x)}const V=[],E=[];for(let x=0;x<h.length;x++){const C=h[x];if(C)try{const X=C.match(/slide-(\d+)-(\d+)\.md/),F=X?`${X[1]}-${X[2]}`:C.replace(".md",""),q=await r(F);let D="";const Ve=q.match(/<h[1-3][^>]*>([^<]+)<\/h[1-3]>/);if(Ve&&Ve[1]&&(D=Ve[1].trim().replace(/^#+\s*/,""),console.log(`📝 제목 추출 (HTML): ${D}`)),!D){const Z=q.match(/^###\s*(.+)$/m);Z&&Z[1]&&(D=Z[1].trim(),console.log(`📝 제목 추출 (###): ${D}`))}if(!D){const Z=q.match(/^##\s*(.+)$/m);Z&&Z[1]&&(D=Z[1].trim(),console.log(`📝 제목 추출 (##): ${D}`))}if(!D){const Z=q.match(/^#\s*(.+)$/m);Z&&Z[1]&&(D=Z[1].trim(),console.log(`📝 제목 추출 (#): ${D}`))}if(!D){const Z=C.match(/slide-(\d+)-(\d+)\.md/);Z&&Z[1]&&Z[2]?(D=`${Z[1]}-${x}`,console.log(`📝 제목 추출 (파일명): ${D}`)):(D=`슬라이드 ${x+1}`,console.log(`📝 제목 추출 (기본): ${D}`))}V.push(D);const ke=q.match(/\[.*?\]\((https:\/\/www\.youtube\.com\/embed\/[^)]+)\)/);E.push({title:D,videoUrl:ke&&ke[1]?ke[1]:null,hasVideo:!!ke})}catch(X){console.warn(`슬라이드 ${C} 내용을 가져올 수 없습니다:`,X);const F=C.match(/slide-(\d+)-(\d+)\.md/);let q=`슬라이드 ${x+1}`;F&&F[1]&&F[2]&&(q=`${F[1]}-${x}`),V.push(q),E.push({title:q,videoUrl:null,hasVideo:!1})}}m.push({title:f,slides:h.length,completed:!1,videoUrl:null,slideTitles:V,slideData:E})}return m}catch(e){return console.error("MD 파일에서 목차 생성 중 오류:",e),W()}},W=()=>[{title:"0. INTRO",slides:7,completed:!1,videoUrl:null,slideTitles:["워크샵 소개","오늘의 여정","워크샵 구성","AI 시대의 도전과 기회","목회자의 AI 활용 사례","AI가 바꾸는 목회 패러다임","생성형AI 이론"],slideData:[{title:"워크샵 소개",videoUrl:null,hasVideo:!1},{title:"오늘의 여정",videoUrl:null,hasVideo:!1},{title:"워크샵 구성",videoUrl:null,hasVideo:!1},{title:"AI 시대의 도전과 기회",videoUrl:null,hasVideo:!1},{title:"목회자의 AI 활용 사례",videoUrl:null,hasVideo:!1},{title:"AI가 바꾸는 목회 패러다임",videoUrl:null,hasVideo:!1},{title:"생성형AI 이론",videoUrl:null,hasVideo:!1}]},{title:"1. WHY",slides:15,completed:!1,videoUrl:null,slideTitles:["생성형AI란?","AI 시대의 도전과 기회","목회자의 AI 활용 사례","AI가 바꾸는 목회 패러다임","1단계: 성경 전체를 읽히기 (데이터 수집)","2단계: 단어 연결 패턴 배우기","3단계: 다음 단어 맞추기 학습","4단계: 문맥 이해하기","5단계: 다양한 번역본으로 학습","6단계: 질문-답변 패턴 학습","7단계: 실제 적용 예시","중요한 깨달음","결론","UX 시나리오를 기반으로 AI 활용법","시나리오: 주일 설교 준비"],slideData:[{title:"생성형AI란?",videoUrl:null,hasVideo:!1},{title:"AI 시대의 도전과 기회",videoUrl:null,hasVideo:!1},{title:"목회자의 AI 활용 사례",videoUrl:null,hasVideo:!1},{title:"AI가 바꾸는 목회 패러다임",videoUrl:null,hasVideo:!1},{title:"1단계: 성경 전체를 읽히기 (데이터 수집)",videoUrl:null,hasVideo:!1},{title:"2단계: 단어 연결 패턴 배우기",videoUrl:null,hasVideo:!1},{title:"3단계: 다음 단어 맞추기 학습",videoUrl:null,hasVideo:!1},{title:"4단계: 문맥 이해하기",videoUrl:null,hasVideo:!1},{title:"5단계: 다양한 번역본으로 학습",videoUrl:null,hasVideo:!1},{title:"6단계: 질문-답변 패턴 학습",videoUrl:null,hasVideo:!1},{title:"7단계: 실제 적용 예시",videoUrl:null,hasVideo:!1},{title:"중요한 깨달음",videoUrl:null,hasVideo:!1},{title:"결론",videoUrl:null,hasVideo:!1},{title:"UX 시나리오를 기반으로 AI 활용법",videoUrl:null,hasVideo:!1},{title:"시나리오: 주일 설교 준비",videoUrl:null,hasVideo:!1}]},{title:"2. WHAT",slides:14,completed:!1,videoUrl:null,slideTitles:["AI 시대, 목회자를 위한 프롬프팅 10가지 비법","1. 명확하고 구체적 질문 - 기본 중의 기본",'2. 역할 부여 - "당신은 ○○ 전문가입니다"',"3. 대상과 맥락 설명 - 청중과 상황 설정","4. 열린 질문 - 창의적 답변 유도","5. 예시 제공 - Few-shot Prompting","6. 어조와 스타일 - 목적에 맞는 톤","7. 원칙 또는 제약 - 경계선 설정","8. 시나리오 활용 - 가상 상황 설정","9. 구조화된 지시 - 단계별 명령","10. 비교하기 - 옵션 분석 요청","마무리","추가 슬라이드"],slideData:[{title:"AI 시대, 목회자를 위한 프롬프팅 10가지 비법",videoUrl:null,hasVideo:!1},{title:"1. 명확하고 구체적 질문 - 기본 중의 기본",videoUrl:null,hasVideo:!1},{title:'2. 역할 부여 - "당신은 ○○ 전문가입니다"',videoUrl:null,hasVideo:!1},{title:"3. 대상과 맥락 설명 - 청중과 상황 설정",videoUrl:null,hasVideo:!1},{title:"4. 열린 질문 - 창의적 답변 유도",videoUrl:null,hasVideo:!1},{title:"5. 예시 제공 - Few-shot Prompting",videoUrl:null,hasVideo:!1},{title:"6. 어조와 스타일 - 목적에 맞는 톤",videoUrl:null,hasVideo:!1},{title:"7. 원칙 또는 제약 - 경계선 설정",videoUrl:null,hasVideo:!1},{title:"8. 시나리오 활용 - 가상 상황 설정",videoUrl:null,hasVideo:!1},{title:"9. 구조화된 지시 - 단계별 명령",videoUrl:null,hasVideo:!1},{title:"10. 비교하기 - 옵션 분석 요청",videoUrl:null,hasVideo:!1},{title:"마무리",videoUrl:null,hasVideo:!1},{title:"추가 슬라이드",videoUrl:null,hasVideo:!1}]},{title:"3. HOW",slides:9,completed:!1,videoUrl:null,slideTitles:Array.from({length:9},(e,t)=>`슬라이드 ${t+1}`),slideData:Array.from({length:9},(e,t)=>({title:`슬라이드 ${t+1}`,videoUrl:null,hasVideo:!1}))},{title:"4. TOOLS",slides:4,completed:!1,videoUrl:null,slideTitles:Array.from({length:4},(e,t)=>`슬라이드 ${t+1}`),slideData:Array.from({length:4},(e,t)=>({title:`슬라이드 ${t+1}`,videoUrl:null,hasVideo:!1}))},{title:"5. PRACTICE",slides:2,completed:!1,videoUrl:null,slideTitles:Array.from({length:2},(e,t)=>`슬라이드 ${t+1}`),slideData:Array.from({length:2},(e,t)=>({title:`슬라이드 ${t+1}`,videoUrl:null,hasVideo:!1}))},{title:"6. UX 시나리오",slides:8,completed:!1,videoUrl:null,slideTitles:["UX 시나리오를 기반으로 AI 활용법","시나리오: 주일 설교 준비","Bad Example: AI에게 모든 것을 떠넘기는 방식","Good Example: 구체적으로 '요청'하는 방식","Best Example: AI와 '대화'하며 생각을 증폭시키는 방식","Best Example: 프롬프트 예시","Best Example: 무엇이 최고인가?","한눈에 보는 비교표"],slideData:[{title:"UX 시나리오를 기반으로 AI 활용법",videoUrl:null,hasVideo:!1},{title:"시나리오: 주일 설교 준비",videoUrl:null,hasVideo:!1},{title:"Bad Example: AI에게 모든 것을 떠넘기는 방식",videoUrl:null,hasVideo:!1},{title:"Good Example: 구체적으로 '요청'하는 방식",videoUrl:null,hasVideo:!1},{title:"Best Example: AI와 '대화'하며 생각을 증폭시키는 방식",videoUrl:null,hasVideo:!1},{title:"Best Example: 프롬프트 예시",videoUrl:null,hasVideo:!1},{title:"Best Example: 무엇이 최고인가?",videoUrl:null,hasVideo:!1},{title:"한눈에 보는 비교표",videoUrl:null,hasVideo:!1}]},{title:"7. AI 툴 복합 적용 시연/실습 (12가지 시나리오)",slides:16,completed:!1,videoUrl:null,slideTitles:["AI 툴 복합 적용 시연/실습 (12가지 시나리오)","LEVEL 1: 기본 툴, 핵심 기능 마스터하기 (1~3단계)","1. 이준호 목사: 주일설교 주제 선정","2. 김은혜 목사: 설교문 구조화","3. 김 목사(58세): 기존 설교 리프레시","LEVEL 2: 여러 툴을 연결하는 워크플로우 만들기 (4~8단계)","4. 박성민 목사: 성경공부 교재 제작","5. 한소영 목사 (SNS 콘텐츠) & 강민호 목사 (예배 디자인)","6. 류 목사(51세): 성도 위로 메시지 & 기도 배경음악","7. 윤 목사(41세) & 정다솔 수련목회자: 행정 업무 자동화","8. 신혜숙 목사: 상담 준비","LEVEL 3: AI를 나만의 도구로 만들고 사역을 기획하기 (9~12단계)","9. 정태영 목사: 새신자 환영 시스템 구축","10. 윤석진 목사: 교회 행사 기획","11. 이미영 목사: 어린이 교육 커리큘럼","12. 김도현 목사: 온라인 목양 & 미래 조망"],slideData:[{title:"AI 툴 복합 적용 시연/실습 (12가지 시나리오)",videoUrl:null,hasVideo:!1},{title:"LEVEL 1: 기본 툴, 핵심 기능 마스터하기 (1~3단계)",videoUrl:null,hasVideo:!1},{title:"1. 이준호 목사: 주일설교 주제 선정",videoUrl:null,hasVideo:!1},{title:"2. 김은혜 목사: 설교문 구조화",videoUrl:null,hasVideo:!1},{title:"3. 김 목사(58세): 기존 설교 리프레시",videoUrl:null,hasVideo:!1},{title:"LEVEL 2: 여러 툴을 연결하는 워크플로우 만들기 (4~8단계)",videoUrl:null,hasVideo:!1},{title:"4. 박성민 목사: 성경공부 교재 제작",videoUrl:null,hasVideo:!1},{title:"5. 한소영 목사 (SNS 콘텐츠) & 강민호 목사 (예배 디자인)",videoUrl:null,hasVideo:!1},{title:"6. 류 목사(51세): 성도 위로 메시지 & 기도 배경음악",videoUrl:null,hasVideo:!1},{title:"7. 윤 목사(41세) & 정다솔 수련목회자: 행정 업무 자동화",videoUrl:null,hasVideo:!1},{title:"8. 신혜숙 목사: 상담 준비",videoUrl:null,hasVideo:!1},{title:"LEVEL 3: AI를 나만의 도구로 만들고 사역을 기획하기 (9~12단계)",videoUrl:null,hasVideo:!1},{title:"9. 정태영 목사: 새신자 환영 시스템 구축",videoUrl:null,hasVideo:!1},{title:"10. 윤석진 목사: 교회 행사 기획",videoUrl:null,hasVideo:!1},{title:"11. 이미영 목사: 어린이 교육 커리큘럼",videoUrl:null,hasVideo:!1},{title:"12. 김도현 목사: 온라인 목양 & 미래 조망",videoUrl:null,hasVideo:!1}]},{title:"8. 실전 AI 활용 워크숍: 청년 수련회 기획",slides:7,completed:!1,videoUrl:null,slideTitles:["실전 AI 활용 워크숍: 청년 수련회 기획","1️⃣ ChatGPT 창의적 기획","2️⃣ Perplexity 실시간 정보 수집","3️⃣ 멀티미디어 홍보 패키지","3️⃣ 멀티미디어 홍보 패키지 (계속)","4️⃣ 예산 최적화 계획","8-6. 수련회 예산 계획 결과"],slideData:[{title:"실전 AI 활용 워크숍: 청년 수련회 기획",videoUrl:null,hasVideo:!1},{title:"1️⃣ ChatGPT 창의적 기획",videoUrl:null,hasVideo:!1},{title:"2️⃣ Perplexity 실시간 정보 수집",videoUrl:null,hasVideo:!1},{title:"3️⃣ 멀티미디어 홍보 패키지",videoUrl:null,hasVideo:!1},{title:"3️⃣ 멀티미디어 홍보 패키지 (계속)",videoUrl:null,hasVideo:!1},{title:"4️⃣ 예산 최적화 계획",videoUrl:null,hasVideo:!1},{title:"8-6. 수련회 예산 계획 결과",videoUrl:null,hasVideo:!1}]}],ne=async()=>{try{Q.log("🚀 강의 목차 초기화 시작..."),o.value=W(),Q.log("✅ 기본 목차 즉시 표시 완료"),setTimeout(async()=>{try{const e=await z();e&&e.length>0?(o.value=e,Q.log("✅ MD 파일 기반 목차 로드 완료:",e)):Q.warn("⚠️ MD 파일에서 목차를 생성할 수 없어 기본 목차를 유지합니다.")}catch(e){Q.error("❌ MD 파일 목차 로드 실패 (기본 목차 유지):",e)}},100)}catch(e){Q.error("❌ 목차 초기화 실패:",e),o.value=W()}},ee=B([{id:1,user:"김목사",time:"5분 전",text:'AI 목회 슬로건 만들기가 정말 창의적이었어요! "기술로 하나님의 마음을 전하다"로 만들었습니다.',likes:8},{id:2,user:"박전도사",time:"10분 전",text:"RGIOC 기법으로 설교 개요 만드는 게 완전히 다른 결과가 나오네요. 실무에 바로 적용할 수 있을 것 같습니다.",likes:12},{id:3,user:"이사모",time:"15분 전",text:"ChatGPT + Canva + Suno 조합으로 청년부 수련회 홍보물 완성했는데, 정말 놀라워요!",likes:15},{id:4,user:"정목사",time:"20분 전",text:"4MAT 사이클로 구성된 세미나가 체계적이고 실용적이네요. 각 단계별로 명확한 목표가 있어서 좋습니다.",likes:6},{id:5,user:"최전도사",time:"25분 전",text:"AI 도구별 특징 비교표가 정말 유용했어요. 목회 상황에 맞는 도구 선택이 쉬워졌습니다.",likes:9}]),K=N(()=>o.value[l.value]||o.value[0]),ve=N(()=>{const e=K.value;return e?.slideData?e.slideData[u.value]:null}),J=N(()=>ve.value?.hasVideo||!1),ye=N(()=>{const e=K.value;return e?(u.value+1)/e.slides*100:0}),he=e=>{l.value=e,u.value=0},de=e=>{const t=K.value;t&&e>=0&&e<t.slides&&(u.value=e)},se=async e=>{try{console.log(`📝 Chapter ${e}에 슬라이드 추가 중...`);const t=o.value[e];if(!t)throw new Error(`Chapter ${e}를 찾을 수 없습니다.`);t.slides++,t.slideTitles||(t.slideTitles=[]),t.slideTitles.push(`새 슬라이드 ${t.slides}`),t.slideData||(t.slideData=[]),t.slideData.push({title:`새 슬라이드 ${t.slides}`,hasVideo:!1});const s=t.slides-1,a=`${e}-${s}`,m=`# 새 슬라이드 ${t.slides}

새로운 슬라이드 내용을 여기에 작성하세요.

## 주요 내용

- 내용 1
- 내용 2
- 내용 3

## 요약

새 슬라이드의 요약 내용입니다.
`;return await Me(a,m),console.log(`✅ Chapter ${e}에 슬라이드 추가 완료 (총 ${t.slides}개)`),!0}catch(t){return console.error(`❌ Chapter ${e}에 슬라이드 추가 실패:`,t),!1}},H=()=>{const e=K.value;if(console.log("🎯 nextSlide 호출됨:",{currentSlide:u.value,currentLesson:l.value,totalSlides:e?.slides,totalLessons:o.value.length,canMoveNext:e&&u.value<e.slides-1}),e&&u.value<e.slides-1){const t=u.value+1;if(ae(l.value,t)){console.log("🔒 다음 슬라이드가 잠겨있음:",t),alert("🔒 다음 슬라이드는 잠겨있어서 학생들에게 공유되지 않습니다.");return}u.value=t,console.log("✅ 다음 슬라이드로 이동:",u.value)}else if(l.value<o.value.length-1){const t=l.value+1;if(Ie(t)){console.log("🔒 다음 Chapter가 잠겨있음:",t),alert("🔒 다음 Chapter는 잠겨있어서 학생들에게 공유되지 않습니다.");return}if(ae(t,0)){console.log("🔒 다음 Chapter의 첫 번째 슬라이드가 잠겨있음"),alert("🔒 다음 Chapter의 첫 번째 슬라이드는 잠겨있어서 학생들에게 공유되지 않습니다.");return}l.value=t,u.value=0,console.log("✅ 다음 Chapter로 이동:",l.value,"슬라이드:",u.value)}else console.log("❌ 다음 슬라이드/Chapter로 이동할 수 없음 - 마지막 Chapter의 마지막 슬라이드"),console.log("🎯 마지막 슬라이드 메시지 표시")},ge=()=>{if(console.log("🎯 prevSlide 호출됨:",{currentSlide:u.value,currentLesson:l.value,canMovePrev:u.value>0,canMovePrevChapter:l.value>0}),u.value>0){const e=u.value-1;if(ae(l.value,e)){console.log("🔒 이전 슬라이드가 잠겨있음:",e),alert("🔒 이전 슬라이드는 잠겨있어서 학생들에게 공유되지 않습니다.");return}u.value=e,console.log("✅ 이전 슬라이드로 이동:",u.value)}else if(l.value>0){const e=l.value-1;if(Ie(e)){console.log("🔒 이전 Chapter가 잠겨있음:",e),alert("🔒 이전 Chapter는 잠겨있어서 학생들에게 공유되지 않습니다.");return}const t=o.value[e],s=t?t.slides-1:0;if(ae(e,s)){console.log("🔒 이전 Chapter의 마지막 슬라이드가 잠겨있음"),alert("🔒 이전 Chapter의 마지막 슬라이드는 잠겨있어서 학생들에게 공유되지 않습니다.");return}l.value=e,u.value=s,console.log("✅ 이전 Chapter로 이동:",l.value,"슬라이드:",u.value)}else console.log("❌ 이전 슬라이드/Chapter로 이동할 수 없음 - 첫 번째 Chapter의 첫 번째 슬라이드"),console.log("🎯 첫 번째 슬라이드 메시지 표시")},d=()=>{J.value&&(b.value=!b.value)},i=()=>{g.value=!g.value},v=()=>{p.value=!p.value,console.log("🎭 프레젠테이션 모드:",p.value?"ON":"OFF")},n=()=>{y.value=!y.value},S=()=>{R.value=!R.value},w=()=>{alert("슬라이드가 다운로드 폴더에 저장되었습니다!")},T=()=>{alert("메모가 이메일로 전송되었습니다!")},U=()=>{I.value.trim()&&(ee.value.unshift({id:Date.now(),user:"사용자",time:"방금 전",text:I.value,likes:0}),I.value="")},$=e=>{k.value=e},ce=()=>{console.log("메모 저장:",k.value)},oe=()=>{k.value=""},L=e=>{const t=ee.value.find(s=>s.id===e);t&&(t.likes+=t.liked?-1:1,t.liked=!t.liked)},O=()=>o.value[l.value]?.slideContents?.[u.value]||"",r=async e=>{console.log("📂 getSlideContentFromMD 시작:",e);try{const t=`/slides/slide-${e}.md`;console.log("🌐 로컬 파일 요청 URL:",t);const s=await fetch(t);if(console.log("📡 응답 상태:",s.status,s.statusText),s.ok){const a=await s.text();return console.log("✅ 로컬 MD 파일 내용 읽기 완료:",{contentLength:a.length,contentPreview:a.substring(0,100)}),a}else console.log("❌ 로컬 파일 응답 실패:",s.status,s.statusText)}catch(t){console.log("⚠️ 로컬 파일 로드 실패, Firebase Storage 폴백 시도:",t)}if(re)try{console.log("🔥 Firebase Storage에서 시도:",e);const t=await ue(e);if(t)return console.log("✅ Firebase Storage에서 로드 성공:",e),t}catch(t){console.log("⚠️ Firebase Storage 로드 실패:",t)}return console.log("❌ 모든 소스에서 파일을 찾을 수 없음:",e),""},A=async(e,t)=>{try{const s=o.value[e];if(!s)return"";const a=`${e}-${t}`,m=await r(a);return s.slideContents||(s.slideContents={}),s.slideContents[t]=m,console.log("🎯 슬라이드 내용 로드 완료:",{lessonIndex:e,slideIndex:t,componentKey:a,contentLength:m.length}),m}catch(s){return console.error("❌ 슬라이드 내용 로드 실패:",s),""}},te=e=>{const t=o.value[l.value];t&&(t.slideContents||(t.slideContents={}),t.slideContents[u.value]=e,console.log("🎯 슬라이드 내용 저장:",{lesson:t.title,slide:u.value,contentLength:e.length}))},Y=async(e,t)=>{try{const s=`# ${o.value[l.value]?.slideTitles?.[u.value]||`슬라이드 ${u.value+1}`}
${t}
---
*생성일: ${new Date().toLocaleString("ko-KR")}*
*파일명: slide-${e}.md*`,a=`slide-${e}.md`,m=new Blob([s],{type:"text/markdown"}),c=URL.createObjectURL(m),h=document.createElement("a");return h.href=c,h.download=a,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(c),console.log("✅ MD 파일 저장 완료:",a),!0}catch(s){return console.error("❌ MD 파일 저장 오류:",s),!1}},P=async(e,t)=>{try{if(console.log("📝 Firebase Storage에 MD 파일 저장 시작:",e),console.log("📝 저장할 내용 길이:",t.length),!re)throw new Error("Firebase Storage가 초기화되지 않았습니다.");const s=Ue(re,`slides/${e}.md`);if(await bt(s,t,"raw"),le){const a=me(le,"slides",e);await Ut(a,{lastModified:Ct(),size:t.length,fileName:`${e}.md`,updatedAt:new Date().toISOString()})}return console.log("✅ Firebase Storage에 MD 파일 저장 성공:",e),!0}catch(s){return console.error("❌ Firebase Storage 저장 오류:",s),!1}},ue=async e=>{try{if(console.log("📖 Firebase Storage에서 MD 파일 로드 시작:",e),!re)throw new Error("Firebase Storage가 초기화되지 않았습니다.");const t=Ue(re,`slides/${e}.md`),s=await $t(t),a=await(await fetch(s)).text();return console.log("✅ Firebase Storage에서 MD 파일 로드 성공:",e),a}catch(t){throw console.error("❌ Firebase Storage 로드 오류:",t),t}},Ge=async()=>{try{if(console.log("📋 Firebase Storage에서 슬라이드 목록 가져오기 시작"),!re)throw new Error("Firebase Storage가 초기화되지 않았습니다.");const e=Ue(re,"slides"),t=(await It(e)).items.map(s=>s.name.replace(".md",""));return console.log("✅ Firebase Storage에서 슬라이드 목록 가져오기 성공:",t.length,"개 파일"),t}catch(e){return console.error("❌ Firebase Storage 목록 가져오기 오류:",e),[]}},Be=async e=>{try{if(console.log("🗑️ Firebase Storage에서 MD 파일 삭제 시작:",e),!re)throw new Error("Firebase Storage가 초기화되지 않았습니다.");const t=Ue(re,`slides/${e}.md`);return await Lt(t),console.log("✅ Firebase Storage에서 MD 파일 삭제 성공:",e),!0}catch(t){return console.error("❌ Firebase Storage 삭제 오류:",t),!1}},_e=async(e,t)=>await P(e,t),ze=e=>{o.value[e]&&(o.value[e].locked=!o.value[e].locked,console.log(`🔒 Chapter ${e} 잠금 상태 변경:`,o.value[e].locked),we(),Le(M.value).catch(t=>console.warn("⚠️ Firestore 잠금 동기화 실패(Chapter):",t?.message||t)))},Je=(e,t)=>{o.value[e]&&(o.value[e].lockedSlides||(o.value[e].lockedSlides={}),o.value[e].lockedSlides[t]=!o.value[e].lockedSlides[t],console.log(`🔒 Slide ${e}-${t} 잠금 상태 변경:`,o.value[e].lockedSlides[t]),we(),Le(M.value).catch(s=>console.warn("⚠️ Firestore 잠금 동기화 실패(Slide):",s?.message||s)))},Ie=e=>o.value[e]?.locked||!1,ae=(e,t)=>o.value[e]?o.value[e].locked?!0:o.value[e].lockedSlides?.[t]||!1:!1,Ze=(e,t)=>!ae(e,t),We=(e,t)=>{let s=e,a=t+1;for(;s<o.value.length;){const m=o.value[s];if(!m){s++,a=0;continue}if(m.locked){s++,a=0;continue}for(;a<m.slides;){if(!ae(s,a))return{lessonIndex:s,slideIndex:a};a++}s++,a=0}return null},qe=(e,t)=>{let s=e,a=t-1;for(;s>=0;){const m=o.value[s];if(!m){if(s--,s>=0){const c=o.value[s];a=c?c.slides-1:-1}continue}if(m.locked){if(s--,s>=0){const c=o.value[s];a=c?c.slides-1:-1}continue}for(;a>=0;){if(!ae(s,a))return{lessonIndex:s,slideIndex:a};a--}if(s--,s>=0){const c=o.value[s];a=c?c.slides-1:-1}}return null},Ke=()=>{for(let e=0;e<o.value.length;e++){const t=o.value[e];if(t&&!t.locked){for(let s=0;s<t.slides;s++)if(!ae(e,s))return{lessonIndex:e,slideIndex:s}}}return null},He=()=>{for(let e=o.value.length-1;e>=0;e--){const t=o.value[e];if(t&&!t.locked){for(let s=t.slides-1;s>=0;s--)if(!ae(e,s))return{lessonIndex:e,slideIndex:s}}}return null},Ae=async()=>{try{const e={chapterLocks:{},slideLocks:{},timestamp:new Date().toISOString()};o.value.forEach((t,s)=>{t.locked===!0&&(e.chapterLocks[s]=!0),t.lockedSlides&&Object.keys(t.lockedSlides).forEach(a=>{const m=`${s}-${a}`;t.lockedSlides[parseInt(a)]===!0&&(e.slideLocks[m]=!0)})}),localStorage.setItem("courseLockStatus",JSON.stringify(e)),console.log("🔒 잠금 상태 저장 완료:",e)}catch(e){console.error("❌ 잠금 상태 저장 오류:",e)}},Fe=async()=>{try{const e=localStorage.getItem("courseLockStatus");if(e){const t=JSON.parse(e);t.chapterLocks&&Object.keys(t.chapterLocks).forEach(s=>{const a=parseInt(s);o.value[a]&&t.chapterLocks[a]===!0&&(o.value[a].locked=!0)}),t.slideLocks&&Object.keys(t.slideLocks).forEach(s=>{const a=s.split("-");if(a.length===2){const m=a[0],c=a[1];if(m&&c){const h=parseInt(m),f=parseInt(c);!isNaN(h)&&!isNaN(f)&&o.value[h]&&t.slideLocks[s]===!0&&(o.value[h].lockedSlides||(o.value[h].lockedSlides={}),o.value[h].lockedSlides[f]=!0)}}}),console.log("🔒 LocalStorage에서 잠금 상태 로드 완료:",t)}}catch(e){console.error("❌ LocalStorage 잠금 상태 로드 오류:",e)}},Ye=async()=>{try{localStorage.removeItem("courseLockStatus"),console.log("🔒 LocalStorage 잠금 상태 초기화 완료")}catch(e){console.error("❌ LocalStorage 잠금 상태 초기화 오류:",e)}},fe=le,Xe=e=>{e&&typeof e=="string"&&(M.value=e,console.log("📌 currentCourseId 설정:",M.value))},Qe=()=>{const e={chapterLocks:{},slideLocks:{},updatedAt:new Date().toISOString()};return o.value.forEach((t,s)=>{t&&(t.locked===!0&&(e.chapterLocks[s]=!0),t.lockedSlides&&Object.keys(t.lockedSlides).forEach(a=>{const m=`${s}-${a}`;t.lockedSlides[parseInt(a)]===!0&&(e.slideLocks[m]=!0)}))}),e},Le=async e=>{try{if(!e||!fe)return!1;const t=Qe();return await xe(me(fe,"locks",e),t),console.log("✅ Firestore 잠금 상태 저장 완료:",{courseId:e,...t}),!0}catch(t){return console.error("❌ Firestore 잠금 상태 저장 실패:",t),!1}},et=async e=>{try{if(!e||!fe)return!1;const t=me(fe,"locks",e),s=await je(t);if(!s.exists())return console.log("ℹ️ Firestore 잠금 문서가 없습니다:",e),!1;const a=s.data();return o.value.forEach(m=>{m&&(m.locked=!1,m.lockedSlides={})}),a.chapterLocks&&Object.keys(a.chapterLocks).forEach(m=>{const c=parseInt(m);!isNaN(c)&&o.value[c]&&(o.value[c].locked=!0)}),a.slideLocks&&Object.keys(a.slideLocks).forEach(m=>{const[c,h]=m.split("-"),f=parseInt(c||""),V=parseInt(h||"");!isNaN(f)&&!isNaN(V)&&o.value[f]&&(o.value[f].lockedSlides||(o.value[f].lockedSlides={}),o.value[f].lockedSlides[V]=!0)}),console.log("✅ Firestore 잠금 상태 로드 완료:",a),!0}catch(t){return console.error("❌ Firestore 잠금 상태 로드 실패:",t),!1}};let Se=null;const tt=e=>{try{if(!e||!fe)return;const t=me(fe,"locks",e);Se&&(Se(),Se=null),Se=Vt(t,s=>{if(!s.exists()){console.log("ℹ️ 잠금 문서 없음 (실시간):",e);return}const a=s.data();o.value.forEach(m=>{m&&(m.locked=!1,m.lockedSlides={})}),a.chapterLocks&&Object.keys(a.chapterLocks).forEach(m=>{const c=parseInt(m);!isNaN(c)&&o.value[c]&&(o.value[c].locked=!0)}),a.slideLocks&&Object.keys(a.slideLocks).forEach(m=>{const[c,h]=m.split("-"),f=parseInt(c||""),V=parseInt(h||"");!isNaN(f)&&!isNaN(V)&&o.value[f]&&(o.value[f].lockedSlides||(o.value[f].lockedSlides={}),o.value[f].lockedSlides[V]=!0)}),console.log("🔔 실시간 잠금 상태 반영 완료:",a)}),console.log("📡 잠금 상태 실시간 구독 시작:",e)}catch(t){console.error("❌ 잠금 상태 실시간 구독 실패:",t)}},lt=async()=>{try{console.log("📁 files.json 업데이트 시작...");const e=await z(),t=[];e.forEach(a=>{for(let m=0;m<a.slides;m++)t.push(`slide-${a.title.match(/^(\d+)\./)?.[1]||"0"}-${m}.md`)});const s={files:t};return localStorage.setItem("files.json",JSON.stringify(s)),console.log("✅ files.json 업데이트 완료:",t.length,"개 파일"),!0}catch(e){return console.error("❌ files.json 업데이트 실패:",e),!1}},st=()=>u.value===0?"chapter":"slide",ot=(e,t)=>{console.log("🎯 Vue 파일 업데이트 시작:",{componentKey:e,contentLength:t.length});try{const s=o.value[l.value]?.slideTitles?.[u.value]||`슬라이드 ${u.value+1}`,a=`<template>
  <div class="slide-content">
    <div class="slide-header">
      <h1 class="slide-title">{{ slideTitle }}</h1>
      <div class="slide-subtitle">{{ lessonTitle }}</div>
    </div>

    <div class="slide-body">
      <div class="slide-description" v-html="renderedContent"></div>
    </div>

    <div class="slide-footer">
      <div class="slide-number">{{ slideIndex + 1 }}</div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue';
import { marked } from 'marked';

interface Props {
  lesson: any;
  slideIndex: number;
}

const props = defineProps<Props>();

// 슬라이드 제목
const slideTitle = computed(() => {
  return props.lesson?.slideTitles?.[props.slideIndex] || '슬라이드';
});

// 강의 제목
const lessonTitle = computed(() => {
  return props.lesson?.title || '강의';
});

// 슬라이드 내용 (MD 파일 내용)
const slideContent = computed(() => {
  return props.lesson?.slideContents?.[props.slideIndex] || '';
});

// Markdown 내용을 HTML로 렌더링
const renderedContent = computed(() => {
  try {
    return marked(slideContent.value);
  } catch (error) {
    console.error('Markdown 렌더링 오류:', error);
    return slideContent.value;
  }
});

console.log('🎯 slide-${e}.vue 컴포넌트 로드됨:', {
  lessonTitle: props.lesson?.title,
  slideIndex: props.slideIndex,
  slideTitle: slideTitle.value,
  contentLength: slideContent.value.length
});
<\/script>

<style scoped>
.slide-content {
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 2rem;
  text-align: center;
}

.slide-header {
  margin-bottom: 2rem;
}

.slide-title {
  font-size: 2.5rem;
  font-weight: 700;
  color: #1976d2;
  margin-bottom: 1rem;
}

.slide-subtitle {
  font-size: 1.2rem;
  color: #666;
  font-weight: 500;
}

.slide-body {
  flex: 1;
  max-width: 800px;
  margin: 0 auto;
}

.slide-description {
  font-size: 1.1rem;
  line-height: 1.6;
  color: #333;
}

.slide-description h1,
.slide-description h2,
.slide-description h3,
.slide-description h4,
.slide-description h5,
.slide-description h6 {
  margin-top: 1.5rem;
  margin-bottom: 0.5rem;
  font-weight: 600;
  color: #1976d2;
}

.slide-description h1 {
  font-size: 2rem;
}

.slide-description h2 {
  font-size: 1.5rem;
}

.slide-description h3 {
  font-size: 1.3rem;
}

.slide-description p {
  margin-bottom: 1rem;
}

.slide-description ul,
.slide-description ol {
  margin-bottom: 1rem;
  padding-left: 2rem;
}

.slide-description li {
  margin-bottom: 0.5rem;
}

.slide-footer {
  margin-top: 2rem;
}

.slide-number {
  font-size: 1.5rem;
  font-weight: 600;
  color: #1976d2;
  background: rgba(25, 118, 210, 0.1);
  padding: 0.5rem 1rem;
  border-radius: 50px;
}
</style>`,m=`slide-${e}.vue`,c=new Blob([a],{type:"text/vue"}),h=URL.createObjectURL(c),f=document.createElement("a");f.href=h,f.download=m,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(h);const V=`slide-${e}.md`,E=new Blob([t],{type:"text/markdown"}),x=URL.createObjectURL(E),C=document.createElement("a");C.href=x,C.download=V,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(x),console.log("✅ Vue 파일과 Markdown 파일 업데이트 완료:",{vueFile:m,mdFile:V,contentLength:t.length})}catch(s){console.error("❌ Vue 파일 업데이트 오류:",s)}},Me=async(e,t)=>{console.log("🎯 마크다운 파일 생성 시작:",{componentKey:e,contentLength:t.length});try{const s=`# ${o.value[l.value]?.slideTitles?.[u.value]||`슬라이드 ${u.value+1}`}

${t}

---
*생성일: ${new Date().toLocaleString("ko-KR")}*
*파일명: slide-${e}.md*
`;if(re)try{await P(e,s),console.log("✅ Firebase Storage에 마크다운 파일 저장 완료:",e)}catch(f){console.error("❌ Firebase Storage 저장 실패:",f)}const a=`slide-${e}.md`,m=new Blob([s],{type:"text/markdown"}),c=URL.createObjectURL(m),h=document.createElement("a");h.href=c,h.download=a,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(c),console.log("✅ 마크다운 파일 생성 완료:",a),console.log("📁 Firebase Storage에 저장되었으며, 로컬 파일도 다운로드되었습니다.")}catch(s){console.error("❌ 마크다운 파일 생성 오류:",s)}},at=e=>{console.log("🎯 Chapter 파일 생성 시작:",e);try{const t=o.value[e];if(!t){console.error("❌ 강의를 찾을 수 없습니다:",e);return}const s=`# ${t.title}

## 강의 개요
- 총 슬라이드 수: ${t.slides}개
- 완료 상태: ${t.completed?"완료":"진행 중"}

## 슬라이드 목록
${t.slideTitles?.map((f,V)=>`${V+1}. ${f}`).join(`
`)||"슬라이드 제목이 없습니다."}

---
*생성일: ${new Date().toLocaleString("ko-KR")}*
*강의: ${t.title}*
`,a=`chapter-${e+1}.md`,m=new Blob([s],{type:"text/markdown"}),c=URL.createObjectURL(m),h=document.createElement("a");h.href=c,h.download=a,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(c),console.log("✅ Chapter 파일 생성 완료:",a)}catch(t){console.error("❌ Chapter 파일 생성 오류:",t)}},rt=async()=>{try{const{firebaseApp:e}=await xt(async()=>{const{firebaseApp:a}=await At(()=>import("./index-D1vT6N3s.js").then(m=>m.gj),__vite__mapDeps([0,1])).then(m=>m.dY);return{firebaseApp:a}},Ne([0,1]));if(!e){console.log("⚠️ Firebase가 초기화되지 않아 Azure Blob Storage 로드를 건너뜁니다.");return}const t=localStorage.getItem("courseStore"),s=t?JSON.parse(t):null;s&&(l.value=s.currentLesson||0,u.value=s.currentSlide||0,b.value=s.isPlaying||!1,g.value=s.sidebarOpen??!0,y.value=s.showComments||!1,R.value=s.liked||!1,_.value=s.progress||15,I.value=s.newComment||"",k.value=s.notes||"",s.lessons&&(o.value=s.lessons,o.value.forEach(a=>{a.slideTitles&&a.slides!==a.slideTitles.length?(console.log(`🔧 강의 "${a.title}" 슬라이드 개수 보정: ${a.slides} → ${a.slideTitles.length}`),a.slides=a.slideTitles.length):a.slideData&&a.slides!==a.slideData.length&&(console.log(`🔧 강의 "${a.title}" 슬라이드 개수 보정: ${a.slides} → ${a.slideData.length}`),a.slides=a.slideData.length)})),s.comments&&(ee.value=s.comments),console.log("✅ LocalStorage에서 데이터 로드 완료")),await Fe()}catch(e){console.error("❌ LocalStorage 로드 오류:",e)}},we=async()=>{try{const e={currentLesson:l.value,currentSlide:u.value,isPlaying:b.value,sidebarOpen:g.value,showComments:y.value,liked:R.value,progress:_.value,newComment:I.value,notes:k.value,lessons:o.value,comments:ee.value,timestamp:new Date().toISOString()};localStorage.setItem("courseStore",JSON.stringify(e)),console.log("✅ LocalStorage 저장 완료")}catch(e){console.error("❌ LocalStorage 저장 오류:",e)}},it=async()=>{try{localStorage.removeItem("courseStore"),localStorage.removeItem("courseLockStatus"),console.log("✅ LocalStorage 클리어 완료")}catch(e){console.error("❌ LocalStorage 클리어 오류:",e)}};ie([l,u,b,g,y,R,_,k],()=>{we().catch(e=>{console.error("❌ 자동 저장 실패:",e)})},{deep:!0}),ie(o,()=>{Ae().catch(e=>{console.error("❌ 잠금 상태 자동 저장 실패:",e)})},{deep:!0});const nt=async e=>{try{const t=await fetch(`/slides/slide-${e}.md`);if(!t.ok)return"[제목없음]";const s=await t.text(),a=s.match(/<h[1-3][^>]*>([^<]+)<\/h[1-3]>/);if(a&&a[1])return a[1].trim();const m=s.split(`
`);for(const c of m){const h=c.trim();if(h.startsWith("### "))return h.replace(/^###\s*/,"").trim();if(h.startsWith("## "))return h.replace(/^##\s*/,"").trim();if(h.startsWith("# "))return h.replace(/^#\s*/,"").trim()}return m[0]?.trim()||"[제목없음]"}catch(t){return console.error("MD 파일 읽기 실패:",t),"[제목없음]"}},dt=async e=>{try{const t=o.value[e];if(!t)return"[제목없음]";const s=`${e}-0`,a=await fetch(`/slides/slide-${s}.md`);if(!a.ok)return t.title||"[제목없음]";const m=await a.text(),c=m.match(/<h[1-3][^>]*>([^<]+)<\/h[1-3]>/);if(c&&c[1]){const V=c[1].trim();return`${e}. ${V}`}const h=m.split(`
`);for(const V of h){const E=V.trim();if(E.startsWith("## ")){const x=E.replace(/^##\s*/,"").trim();return`${e}. ${x}`}if(E.startsWith("# ")&&!E.includes("-")){const x=E.replace(/^#\s*/,"").trim();return`${e}. ${x}`}}const f=h[0]?.trim();if(f&&f.startsWith("#")){const V=f.replace(/^#+\s*/,"").trim(),E=V.match(/^\d+-\d+\s+(.+)$/);return E?`${e}. ${E[1]}`:`${e}. ${V}`}return t.title||"[제목없음]"}catch(t){return console.error("Chapter 제목 읽기 실패:",t),o.value[e]?.title||"[제목없음]"}},ct=async()=>{try{const e=await(await fetch("/data/course-outline.json")).json();o.value=e.lessons,console.log("✅ 강의 목차 로드 완료:",e.title)}catch(e){console.error("❌ 강의 목차 로드 실패:",e),o.value=[{title:"0. INTRO",slides:2,completed:!1,videoUrl:null,slideTitles:["워크샵 소개","오늘의 여정"],slideData:[{title:"워크샵 소개",hasVideo:!1},{title:"오늘의 여정",hasVideo:!1}]},{title:"1. WHY",slides:4,completed:!1,videoUrl:null,slideTitles:["생성형AI란?","AI 시대의 도전과 기회","목회자의 AI 활용 사례","AI가 바꾸는 목회 패러다임"],slideData:[{title:"생성형AI란?",hasVideo:!1},{title:"AI 시대의 도전과 기회",hasVideo:!1},{title:"목회자의 AI 활용 사례",hasVideo:!1},{title:"AI가 바꾸는 목회 패러다임",hasVideo:!1}]}]}},ut=(e,t)=>{he(e),de(t)},mt=()=>`${l.value}-${u.value}`,ht=N(()=>l.value===0&&u.value===0),vt=N(()=>{const e=o.value.length-1,t=o.value[e];return l.value===e&&u.value===(t?.slides||0)-1});return{currentLesson:l,currentSlide:u,isPlaying:b,sidebarOpen:g,showComments:y,liked:R,progress:_,newComment:I,notes:k,isPresentationMode:p,lessons:o,comments:ee,currentLessonData:K,currentSlideData:ve,hasVideo:J,slideProgress:ye,isFirstSlide:ht,isLastSlide:vt,setCurrentLesson:he,setCurrentSlide:de,addSlideToLesson:se,nextSlide:H,prevSlide:ge,navigateToSlide:ut,getCurrentSlideId:mt,togglePlaying:d,toggleSidebar:i,togglePresentationMode:v,toggleComments:n,toggleLiked:S,handleCaptureSlide:w,handleSendNotesByEmail:T,addComment:U,updateNotes:$,saveNotes:ce,clearNotes:oe,toggleCommentLike:L,getCurrentSlideContent:O,saveSlideContent:te,getCurrentSlideType:st,updateVueFileWithMarkdown:ot,createMarkdownFile:Me,createChapterFile:at,loadFromLocalStorage:rt,saveToLocalStorage:we,clearLocalStorage:it,loadCourseOutline:ct,generateCourseOutlineFromMD:z,initializeCourseOutline:ne,getSlideTitleFromMD:nt,getChapterTitleFromMD:dt,getSlideContentFromMD:r,saveSlideContentToMD:Y,loadSlideContentForEditing:A,overwriteSlideContentToMD:_e,saveSlideToFirebaseStorage:P,loadSlideFromFirebaseStorage:ue,listAllSlidesFromFirebase:Ge,deleteSlideFromFirebaseStorage:Be,toggleChapterLock:ze,toggleSlideLock:Je,isChapterLocked:Ie,isSlideLocked:ae,canNavigateToSlide:Ze,findNextUnlockedSlide:We,findPrevUnlockedSlide:qe,findFirstUnlockedSlide:Ke,findLastUnlockedSlide:He,saveLockStatus:Ae,loadLockStatus:Fe,clearLockStatus:Ye,setCurrentCourseId:Xe,saveLockStatusToFirestore:Le,loadLockStatusFromFirestore:et,subscribeLockStatus:tt,updateFilesJson:lt}});class Jt{baseUrl="http://localhost:8090/api/email";async sendLearningCompletionEmail(u,M,b){try{return await(await fetch(`${this.baseUrl}/learning-completion`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentEmail:u,studentName:M,courseName:b})})).json()}catch(g){return console.error("❌ 학습 완료 이메일 전송 실패:",g),{success:!1,message:"이메일 전송에 실패했습니다."}}}async sendCourseShareEmail(u,M,b,g,y){try{return await(await fetch(`${this.baseUrl}/course-share`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientEmail:u,recipientName:M,senderName:b,courseName:g,shareUrl:y})})).json()}catch(R){return console.error("❌ 강의 공유 이메일 전송 실패:",R),{success:!1,message:"이메일 전송에 실패했습니다."}}}async sendSystemNotificationEmail(u,M,b,g="info"){try{return await(await fetch(`${this.baseUrl}/system-notification`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientEmail:u,subject:M,message:b,notificationType:g})})).json()}catch(y){return console.error("❌ 시스템 알림 이메일 전송 실패:",y),{success:!1,message:"이메일 전송에 실패했습니다."}}}async sendGuestRegistrationEmail(u,M){const b=M||"jplee@milestonz.com";try{return await(await fetch(`${this.baseUrl}/guest-registration`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guestInfo:u,adminEmail:b})})).json()}catch(g){return console.error("❌ 게스트 등록 이메일 전송 실패:",g),{success:!1,message:"게스트 등록 이메일 전송에 실패했습니다."}}}async getEmailStatus(){try{return await(await fetch(`${this.baseUrl}/status`)).json()}catch(u){return console.error("❌ 이메일 상태 확인 실패:",u),{success:!1,configured:!1,config:{host:"",port:587,secure:!1,user:"",pass:""}}}}}const Zt=new Jt,G=B(null),Ce=B(!1);function Xt(){const l=gt(),u=()=>{Ce.value=!0,console.log("🎭 게스트 모드 활성화")},M=()=>{Ce.value=!1,G.value=null,console.log("🎭 게스트 모드 비활성화")},b=async(I,k)=>{const p=`guest_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,o={id:p,name:I||"게스트 사용자",email:k,role:"guest",isGuest:!0,isInfoRegistered:!1,createdAt:new Date};try{if(le)try{const z=me(le,"guestUsers",p);await xe(z,{...o,createdAt:o.createdAt.toISOString()}),console.log("🎭 Firestore에 게스트 사용자 정보 저장 성공")}catch(z){console.warn("⚠️ Firestore 저장 실패, LocalStorage만 사용:",z)}else console.warn("⚠️ Firestore가 초기화되지 않음, LocalStorage만 사용");return G.value=o,localStorage.setItem("guestUser",JSON.stringify(o)),localStorage.setItem("guestUserId",p),localStorage.setItem("isGuestMode","true"),console.log("🎭 게스트 로그인 성공:",G.value),l.notify({type:"warning",message:"게스트 모드로 로그인되었습니다. 추가 정보 등록이 필요합니다.",timeout:3e3}),G.value}catch(z){throw console.error("❌ 게스트 로그인 실패:",z),new Error("게스트 로그인에 실패했습니다.")}},g=async(I,k)=>{if(!G.value)throw new Error("게스트 사용자가 로그인되지 않았습니다.");const p={...G.value,name:I,email:k,isInfoRegistered:!0};try{if(le)try{const o=me(le,"guestUsers",G.value.id);await xe(o,{...p,createdAt:p.createdAt.toISOString()},{merge:!0}),console.log("🎭 게스트 정보 등록 완료 (Firestore 업데이트):",p)}catch(o){console.warn("⚠️ Firestore 업데이트 실패, LocalStorage만 사용:",o)}else console.warn("⚠️ Firestore가 초기화되지 않음, LocalStorage만 사용");G.value=p,localStorage.setItem("guestUser",JSON.stringify(p));try{const o=await Zt.sendGuestRegistrationEmail({name:p.name,email:p.email,guestId:p.id,createdAt:p.createdAt.toISOString()});o.success?(console.log("✅ 게스트 등록 이메일 전송 성공"),l.notify({type:"positive",message:"게스트 정보가 등록되었습니다! 관리자에게 이메일이 전송되었습니다.",timeout:3e3})):(console.warn("⚠️ 게스트 등록 이메일 전송 실패:",o.message),l.notify({type:"warning",message:"게스트 정보가 등록되었습니다! (이메일 전송 실패)",timeout:3e3}))}catch(o){console.error("❌ 게스트 등록 이메일 전송 중 오류:",o),l.notify({type:"warning",message:"게스트 정보가 등록되었습니다! (이메일 전송 실패)",timeout:3e3})}return G.value}catch(o){throw console.error("❌ 게스트 정보 등록 실패:",o),new Error("게스트 정보 등록에 실패했습니다.")}},y=async()=>{console.log("🔍 useGuestAuth: signOutGuest 함수 호출됨"),console.log("🔍 useGuestAuth: 현재 게스트 사용자:",G.value);try{if(G.value?.id&&le){console.log("🔍 useGuestAuth: Firestore에서 게스트 사용자 정보 삭제 시작");const I=me(le,"guestUsers",G.value.id);await ft(I),console.log("✅ useGuestAuth: Firestore에서 게스트 사용자 정보 삭제 완료")}else console.log("🔍 useGuestAuth: Firestore 삭제 건너뜀 (게스트 사용자 ID 또는 DB 없음)")}catch(I){console.error("❌ useGuestAuth: Firestore에서 게스트 사용자 정보 삭제 실패:",I)}console.log("🔍 useGuestAuth: 로컬 상태 초기화 시작"),G.value=null,localStorage.removeItem("guestUserId"),localStorage.removeItem("isGuestMode"),console.log("✅ useGuestAuth: 로컬 상태 초기화 완료"),console.log("🎭 게스트 로그아웃 완료")},R=async()=>{const I=localStorage.getItem("guestUserId"),k=localStorage.getItem("isGuestMode");if(I&&k==="true"&&le)try{const p=me(le,"guestUsers",I),o=await je(p);if(o.exists()){const z=o.data();return G.value={...z,createdAt:new Date(z.createdAt)},Ce.value=!0,console.log("🎭 게스트 세션 복원 (Firestore):",G.value),!0}else return console.log("❌ Firestore에서 게스트 사용자 정보를 찾을 수 없음"),localStorage.removeItem("guestUserId"),localStorage.removeItem("isGuestMode"),!1}catch(p){return console.error("❌ 게스트 세션 복원 실패 (Firestore):",p),localStorage.removeItem("guestUserId"),localStorage.removeItem("isGuestMode"),!1}return!1},_=I=>G.value&&{"view-slides":!0,"edit-slides":!1,"download-slides":!0,"share-slides":!1,"admin-panel":!1}[I]||!1;return{guestUser:N(()=>G.value),isGuestMode:N(()=>Ce.value),isGuestAuthenticated:N(()=>!!G.value),isGuestInfoRegistered:N(()=>G.value?.isInfoRegistered||!1),enableGuestMode:u,disableGuestMode:M,signInAsGuest:b,registerGuestInfo:g,signOutGuest:y,restoreGuestSession:R,canAccessFeature:_}}export{zt as B,Q as K,Re as R,Xt as Y,Ht as Z,Yt as q,Zt as z};
